{"type":"getPostById","data":{"title":"Quartz分布式调度框架","date":"2023-11-03T13:38:53.000Z","description":"Quartz分布式调度框架","categories":[{"name":"分布式","_id":"cloioo9e50041ni0pgubn7qbg"}],"tags":[{"name":"Tools","_id":"cloioo9ed005ini0p4csj4h6j"}],"content":"<meta name=\"referrer\" content=\"no-referrer\">\n<h2 id=\"介绍\">介绍</h2>\n<p>由java 开发，可以用来执行定时任务的任务调度框架</p>\n<h3 id=\"组成\">组成</h3>\n<ul>\n<li>具有定时功能的接口： Task(Job) ：比如定时发送邮件、重启机器、优惠券到期提醒  等任务</li>\n<li>需要一个触发器去触发任务的执行，最基本的功能就是 <code>指定</code>Job 的执行时间，执行间隔，运行次数等</li>\n<li>如何将上面的两个结合起来；使用<code>Schedule</code>;来负责定时任务真正的执行</li>\n</ul>\n<p>所以组成：调度器：<code>Scheduler</code> ；任务：<code>JobDetail</code>；触发器：<code>Trigger</code>，包括SimpleTrigger和CronTrigger；</p>\n<h3 id=\"关系\">关系</h3>\n<ul>\n<li>一个<code>JobDetail</code>（Job的实现类）可以绑定<code>多个Trigger</code>，但<code>一个Trigger</code>只能绑定一个<code>JobDetail</code>；</li>\n<li>每个<code>JobDetail</code>和<code>Trigger</code>通过==group==和==name==来标识各自的唯一性；</li>\n<li>一个<code>Scheduler</code>可以调度多组<code>JobDetail</code>和<code>Trigger</code>。</li>\n</ul>\n<h3 id=\"对比\">对比</h3>\n<table>\n<thead>\n<tr>\n<th>实现方式</th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SpringSchedule</td>\n<td>使用@Secheduled即可，支持多种调度方式，支持Cron表达式</td>\n<td>没有任务的动态管理</td>\n</tr>\n<tr>\n<td>Quartz</td>\n<td>支持多种调度方式，支持Cron表达式,有丰富的API</td>\n<td>持久化对业务侵入性强：调度和JOB耦合在一个项目中，调度系统性能受限于业务：quartz底层以“抢占式”获取DB锁并由抢占成功节点负责运行任务，会导致节点负载悬殊过大</td>\n</tr>\n<tr>\n<td>XXL-Job</td>\n<td>支持集群部署，提供运维界面，维护成本小，自带错误预警</td>\n<td>相对Quaz来说需要多部署调度中心</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"使用\">使用</h2>\n<h3 id=\"基本使用\">基本使用</h3>\n<h4 id=\"基于时间间隔的定时任务\">基于时间间隔的定时任务</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.Quartz;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.quartz.Job;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.quartz.JobExecutionContext;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.text.SimpleDateFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Job</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PrintlnWordsJob_</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Job</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(JobExecutionContext jobExecutionContext)</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">time</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SimpleDateFormat</span>(<span class=\"string\">&quot;yy-MM-dd HH-mm-ss&quot;</span>).format(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;start at:&quot;</span> + time+ <span class=\"string\">&quot; hello Job-&quot;</span>+ <span class=\"keyword\">new</span> <span class=\"title class_\">Random</span>().nextInt(<span class=\"number\">100</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.Quartz;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.quartz.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.quartz.impl.StdSchedulerFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.concurrent.TimeUnit;</span><br><span class=\"line\"><span class=\"comment\">//调度器</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Scheduler_</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SchedulerException, InterruptedException &#123;</span><br><span class=\"line\">      <span class=\"comment\">// Scheduler</span></span><br><span class=\"line\">        <span class=\"type\">StdSchedulerFactory</span> <span class=\"variable\">stdSchedulerFactory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StdSchedulerFactory</span>();</span><br><span class=\"line\">        <span class=\"type\">Scheduler</span> <span class=\"variable\">scheduler</span> <span class=\"operator\">=</span> stdSchedulerFactory.getScheduler();</span><br><span class=\"line\">      <span class=\"comment\">// JobDetail</span></span><br><span class=\"line\">       <span class=\"type\">JobDetail</span> <span class=\"variable\">Jobdetail</span> <span class=\"operator\">=</span> JobBuilder</span><br><span class=\"line\">               .newJob(PrintlnWordsJob_.class)</span><br><span class=\"line\">               .withIdentity(<span class=\"string\">&quot;job1&quot;</span>, <span class=\"string\">&quot;group1&quot;</span>)</span><br><span class=\"line\">               .build();</span><br><span class=\"line\">      <span class=\"comment\">//Trigger</span></span><br><span class=\"line\">        <span class=\"type\">SimpleTrigger</span> <span class=\"variable\">trigger</span> <span class=\"operator\">=</span> TriggerBuilder.newTrigger()</span><br><span class=\"line\">                .withIdentity(<span class=\"string\">&quot;triggerBuilder1&quot;</span>, <span class=\"string\">&quot;trigger-group&quot;</span>)</span><br><span class=\"line\">                .withSchedule(SimpleScheduleBuilder</span><br><span class=\"line\">                        .simpleSchedule()</span><br><span class=\"line\">                        .withIntervalInSeconds(<span class=\"number\">2</span>)</span><br><span class=\"line\">                        .repeatForever())</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">      <span class=\"comment\">//将Jobdetail，trigger结合</span></span><br><span class=\"line\">        scheduler.scheduleJob(Jobdetail,trigger);</span><br><span class=\"line\">      <span class=\"comment\">//执行调度器</span></span><br><span class=\"line\">        scheduler.start();</span><br><span class=\"line\">      <span class=\"comment\">//设置休眠</span></span><br><span class=\"line\">        TimeUnit.SECONDS.sleep(<span class=\"number\">30</span>);</span><br><span class=\"line\">        <span class=\"comment\">// 是因为定时任务是交由线程池异步执行的，而测试方法运行结束，主线程随之结束导致定时任务也不再执行了，所以需要设置休眠hold住主线程。在真实项目中，项目的进程是一直存活的，因此不需要设置休眠时间。</span></span><br><span class=\"line\">        scheduler.shutdown();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.824</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Using</span> default implementation <span class=\"keyword\">for</span> <span class=\"title class_\">ThreadExecutor</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.826</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Job</span> execution threads will use <span class=\"keyword\">class</span> loader of <span class=\"symbol\">thread:</span> main</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">SchedulerSignalerImpl</span> - <span class=\"title class_\">Initialized</span> <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">Signaller</span> of <span class=\"symbol\">type:</span> <span class=\"keyword\">class</span> org.quartz.core.<span class=\"title class_\">SchedulerSignalerImpl</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Quartz</span> <span class=\"title class_\">Scheduler</span> v.<span class=\"number\">2.3</span>.<span class=\"number\">2</span> created.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.simpl.<span class=\"title class_\">RAMJobStore</span> - <span class=\"title class_\">RAMJobStore</span> initialized.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> meta-<span class=\"symbol\">data:</span> <span class=\"title class_\">Quartz</span> <span class=\"title class_\">Scheduler</span> (v2.<span class=\"number\">3.2</span>) <span class=\"string\">&#x27;DefaultQuartzScheduler&#x27;</span> with instanceId <span class=\"string\">&#x27;NON_CLUSTERED&#x27;</span></span><br><span class=\"line\">  <span class=\"title class_\">Scheduler</span> <span class=\"symbol\">class:</span> <span class=\"string\">&#x27;org.quartz.core.QuartzScheduler&#x27;</span> - running locally.</span><br><span class=\"line\">  <span class=\"variable constant_\">NOT</span> <span class=\"variable constant_\">STARTED</span>.</span><br><span class=\"line\">  <span class=\"title class_\">Currently</span> <span class=\"keyword\">in</span> standby mode.</span><br><span class=\"line\">  <span class=\"title class_\">Number</span> of jobs <span class=\"symbol\">executed:</span> <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"title class_\">Using</span> thread pool <span class=\"string\">&#x27;org.quartz.simpl.SimpleThreadPool&#x27;</span> - with <span class=\"number\">10</span> threads.</span><br><span class=\"line\">  <span class=\"title class_\">Using</span> job-store <span class=\"string\">&#x27;org.quartz.simpl.RAMJobStore&#x27;</span> - which does <span class=\"keyword\">not</span> support persistence. <span class=\"keyword\">and</span> is <span class=\"keyword\">not</span> clustered.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Quartz</span> scheduler <span class=\"string\">&#x27;DefaultQuartzScheduler&#x27;</span> initialized from default resource file <span class=\"keyword\">in</span> <span class=\"title class_\">Quartz</span> <span class=\"symbol\">package:</span> <span class=\"string\">&#x27;quartz.properties&#x27;</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.832</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Quartz</span> scheduler <span class=\"symbol\">version:</span> <span class=\"number\">2.3</span>.<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.835</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> started.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.835</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.836</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.837</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">31.837</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">1</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">31</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">41</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">33.835</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">33.836</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">33.836</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">2</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">33</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">41</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">35.839</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">35.840</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">35.840</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">3</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">35</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">59</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">37.839</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">37.839</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">37.840</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">4</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">37</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">85</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">39.838</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">39.839</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">39.839</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">5</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">39</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">70</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.837</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> shutting down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.837</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> paused.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.837</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;group1.job1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.838</span> [main] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Shutting</span> down threadpool...</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.838</span> [main] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Shutdown</span> of threadpool complete.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.838</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> shutdown complete.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.839</span> [<span class=\"title class_\">WorkerThread</span>-<span class=\"title class_\">LastJob</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job group1.job1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">02</span> <span class=\"number\">23</span>-<span class=\"number\">58</span>-<span class=\"number\">41</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">81</span></span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.840</span> [<span class=\"title class_\">WorkerThread</span>-<span class=\"title class_\">LastJob</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.848</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">5</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.864</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">4</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.885</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">2</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.887</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">3</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.887</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">8</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.893</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">7</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.893</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">10</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.895</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">6</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.899</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">1</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"><span class=\"number\">23</span><span class=\"symbol\">:</span><span class=\"number\">58</span><span class=\"symbol\">:</span><span class=\"number\">41.899</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">9</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">WorkerThread</span> is shut down.</span><br><span class=\"line\"></span><br><span class=\"line\">进程已结束，退出代码为 <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"基于Cron-表达式的定时任务\">基于Cron 表达式的定时任务</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> SchedulerException, InterruptedException &#123;</span><br><span class=\"line\">    <span class=\"type\">StdSchedulerFactory</span> <span class=\"variable\">stdSchedulerFactory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StdSchedulerFactory</span>();</span><br><span class=\"line\">    <span class=\"type\">Scheduler</span> <span class=\"variable\">scheduler</span> <span class=\"operator\">=</span> stdSchedulerFactory.getScheduler();</span><br><span class=\"line\">    <span class=\"type\">JobDetail</span> <span class=\"variable\">JobDetail</span> <span class=\"operator\">=</span> JobBuilder</span><br><span class=\"line\">            .newJob(PrintlnWordsJob_.class)</span><br><span class=\"line\">            .withIdentity(<span class=\"string\">&quot;job1&quot;</span>, <span class=\"string\">&quot;group1&quot;</span>)</span><br><span class=\"line\">            .build();</span><br><span class=\"line\">    <span class=\"type\">Trigger</span> <span class=\"variable\">trigger</span> <span class=\"operator\">=</span> TriggerBuilder.newTrigger()</span><br><span class=\"line\">            .withIdentity(<span class=\"string\">&quot;triggerBuilder1&quot;</span>, <span class=\"string\">&quot;trigger-group&quot;</span>)</span><br><span class=\"line\">            .startNow()                                             <span class=\"comment\">//    s  m   h    D     M   Y</span></span><br><span class=\"line\">            .withSchedule(CronScheduleBuilder.cronSchedule(<span class=\"string\">&quot;*   5  11  ?  1/5  *&quot;</span>))</span><br><span class=\"line\">            .build();</span><br><span class=\"line\">    scheduler.scheduleJob(JobDetail, trigger);</span><br><span class=\"line\">    scheduler.start();</span><br><span class=\"line\">    TimeUnit.SECONDS.sleep(<span class=\"number\">10</span>);<span class=\"comment\">//设置休眠</span></span><br><span class=\"line\">    <span class=\"comment\">// 是因为定时任务是交由线程池异步执行的，而测试方法运行结束，主线程随之结束导致定时任务也不再执行了，所以需要设置休眠hold住主线程。在真实项目中，项目的进程是一直存活的，因此不需要设置休眠时间。</span></span><br><span class=\"line\">    scheduler.shutdown();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"进阶使用\">进阶使用</h3>\n<h4 id=\"多触发器的定时任务\">多触发器的定时任务</h4>\n<blockquote>\n<p>前提：</p>\n<ul>\n<li>首先，要通过<code>storeDurably()</code>方法将<code>JobDetail</code>设置为孤立后保存存储（没有触发器指向该作业的情况）；</li>\n<li><code>Scheduler</code>通过<code>addJob()</code>将给定的作业添加到计划程序中-没有关联的触发器。作业将处于“休眠”状态，直到使用触发器或调度程序对其进行调度；</li>\n<li>触发器通过<code>forJob(JobDetail jobDetail)</code>指定要绑定的<code>JobDetail</code>，<code>scheduleJob()</code>方法只传入触发器，触发后将自动执行addJob过的绑定<code>JobDetail</code>。</li>\n</ul>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">StdSchedulerFactory</span> <span class=\"variable\">stdSchedulerFactory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StdSchedulerFactory</span>();</span><br><span class=\"line\">    <span class=\"type\">Scheduler</span> <span class=\"variable\">scheduler</span> <span class=\"operator\">=</span> stdSchedulerFactory.getScheduler();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">JobDetail</span> <span class=\"variable\">jobDetail</span> <span class=\"operator\">=</span> JobBuilder.newJob(PrintlnWordsJob_.class)</span><br><span class=\"line\">            .withIdentity(<span class=\"string\">&quot;Job_1&quot;</span>, <span class=\"string\">&quot;name_1&quot;</span>)</span><br><span class=\"line\">            .storeDurably()</span><br><span class=\"line\">            .build();</span><br><span class=\"line\">    <span class=\"type\">Trigger</span> <span class=\"variable\">trigger1</span> <span class=\"operator\">=</span> TriggerBuilder.newTrigger()</span><br><span class=\"line\">            .withIdentity(<span class=\"string\">&quot;trigger1&quot;</span>, <span class=\"string\">&quot;tigger1_group1&quot;</span>)</span><br><span class=\"line\">            .startNow()</span><br><span class=\"line\">            .forJob(jobDetail)</span><br><span class=\"line\">            .withSchedule(SimpleScheduleBuilder</span><br><span class=\"line\">                    .simpleSchedule()</span><br><span class=\"line\">                    .withIntervalInSeconds(<span class=\"number\">2</span>) <span class=\"comment\">//每隔2s执行一次</span></span><br><span class=\"line\">                    .repeatForever())</span><br><span class=\"line\">            .build();</span><br><span class=\"line\">    <span class=\"type\">Trigger</span> <span class=\"variable\">trigger2</span> <span class=\"operator\">=</span> TriggerBuilder.newTrigger()</span><br><span class=\"line\">            .withIdentity(<span class=\"string\">&quot;trigger2&quot;</span>, <span class=\"string\">&quot;tigger2_group2&quot;</span>)</span><br><span class=\"line\">            .startNow()</span><br><span class=\"line\">            .forJob(jobDetail)</span><br><span class=\"line\">            .withSchedule(SimpleScheduleBuilder</span><br><span class=\"line\">                    .simpleSchedule()</span><br><span class=\"line\">                    .withIntervalInSeconds(<span class=\"number\">3</span>) <span class=\"comment\">//每隔3s执行一次</span></span><br><span class=\"line\">                    .repeatForever())</span><br><span class=\"line\">            .build();</span><br><span class=\"line\">    scheduler.addJob(jobDetail, <span class=\"literal\">false</span>);</span><br><span class=\"line\">    scheduler.scheduleJob(trigger1);</span><br><span class=\"line\">    scheduler.scheduleJob(trigger2);</span><br><span class=\"line\">    scheduler.start();</span><br><span class=\"line\">    TimeUnit.SECONDS.sleep(<span class=\"number\">10</span>);</span><br><span class=\"line\">    scheduler.shutdown();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">209</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Using</span> default implementation <span class=\"keyword\">for</span> <span class=\"title class_\">ThreadExecutor</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">211</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Job</span> execution threads will use <span class=\"keyword\">class</span> loader of <span class=\"symbol\">thread:</span> main</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">217</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">SchedulerSignalerImpl</span> - <span class=\"title class_\">Initialized</span> <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">Signaller</span> of <span class=\"symbol\">type:</span> <span class=\"keyword\">class</span> org.quartz.core.<span class=\"title class_\">SchedulerSignalerImpl</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">217</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Quartz</span> <span class=\"title class_\">Scheduler</span> v.<span class=\"number\">2.3</span>.<span class=\"number\">2</span> created.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">217</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.simpl.<span class=\"title class_\">RAMJobStore</span> - <span class=\"title class_\">RAMJobStore</span> initialized.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">218</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> meta-<span class=\"symbol\">data:</span> <span class=\"title class_\">Quartz</span> <span class=\"title class_\">Scheduler</span> (v2.<span class=\"number\">3.2</span>) <span class=\"string\">&#x27;DefaultQuartzScheduler&#x27;</span> with instanceId <span class=\"string\">&#x27;NON_CLUSTERED&#x27;</span></span><br><span class=\"line\">  <span class=\"title class_\">Scheduler</span> <span class=\"symbol\">class:</span> <span class=\"string\">&#x27;org.quartz.core.QuartzScheduler&#x27;</span> - running locally.</span><br><span class=\"line\">  <span class=\"variable constant_\">NOT</span> <span class=\"variable constant_\">STARTED</span>.</span><br><span class=\"line\">  <span class=\"title class_\">Currently</span> <span class=\"keyword\">in</span> standby mode.</span><br><span class=\"line\">  <span class=\"title class_\">Number</span> of jobs <span class=\"symbol\">executed:</span> <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"title class_\">Using</span> thread pool <span class=\"string\">&#x27;org.quartz.simpl.SimpleThreadPool&#x27;</span> - with <span class=\"number\">10</span> threads.</span><br><span class=\"line\">  <span class=\"title class_\">Using</span> job-store <span class=\"string\">&#x27;org.quartz.simpl.RAMJobStore&#x27;</span> - which does <span class=\"keyword\">not</span> support persistence. <span class=\"keyword\">and</span> is <span class=\"keyword\">not</span> clustered.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">218</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Quartz</span> scheduler <span class=\"string\">&#x27;DefaultQuartzScheduler&#x27;</span> initialized from default resource file <span class=\"keyword\">in</span> <span class=\"title class_\">Quartz</span> <span class=\"symbol\">package:</span> <span class=\"string\">&#x27;quartz.properties&#x27;</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">218</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.impl.<span class=\"title class_\">StdSchedulerFactory</span> - <span class=\"title class_\">Quartz</span> scheduler <span class=\"symbol\">version:</span> <span class=\"number\">2.3</span>.<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">221</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> started.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">221</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">222</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">1</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">04</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">2</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">04</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">78</span></span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">04</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">13</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">06</span>.<span class=\"number\">225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">06</span>.<span class=\"number\">226</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">06</span>.<span class=\"number\">226</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">3</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">06</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">86</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">07</span>.<span class=\"number\">222</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">07</span>.<span class=\"number\">223</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">4</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">07</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">59</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">07</span>.<span class=\"number\">224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span>08.<span class=\"number\">220</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span>08.<span class=\"number\">221</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span>08.<span class=\"number\">221</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">5</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-08 hello <span class=\"title class_\">Job</span>-<span class=\"number\">57</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">6</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">10</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">10.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">7</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">10</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">43</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">12.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">12.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">12.225</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">8</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">12</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">29</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">13.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">13.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">13.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">9</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">13</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">81</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">PropertySettingJobFactory</span> - <span class=\"title class_\">Producing</span> instance of <span class=\"title class_\">Job</span> <span class=\"string\">&#x27;name_1.Job_1&#x27;</span>, <span class=\"keyword\">class</span>=com.ry.learning.study.<span class=\"title class_\">Quartz</span>.<span class=\"title class_\">PrintlnWordsJob</span>_</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_QuartzSchedulerThread] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">QuartzSchedulerThread</span> - batch acquisition of <span class=\"number\">1</span> triggers</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.224</span> [<span class=\"title class_\">DefaultQuartzScheduler</span>_Worker-<span class=\"number\">10</span>] <span class=\"variable constant_\">DEBUG</span> org.quartz.core.<span class=\"title class_\">JobRunShell</span> - <span class=\"title class_\">Calling</span> execute on job name_1.<span class=\"title class_\">Job</span>_1</span><br><span class=\"line\">start <span class=\"symbol\">at:</span><span class=\"number\">23</span>-<span class=\"number\">11</span>-<span class=\"number\">03</span> <span class=\"number\">13</span>-<span class=\"number\">32</span>-<span class=\"number\">14</span> hello <span class=\"title class_\">Job</span>-<span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.226</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> shutting down.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.226</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> paused.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.226</span> [main] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Shutting</span> down threadpool...</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.226</span> [main] <span class=\"variable constant_\">DEBUG</span> org.quartz.simpl.<span class=\"title class_\">SimpleThreadPool</span> - <span class=\"title class_\">Shutdown</span> of threadpool complete.</span><br><span class=\"line\"><span class=\"number\">13</span><span class=\"symbol\">:</span><span class=\"number\">32</span><span class=\"symbol\">:</span><span class=\"number\">14.226</span> [main] <span class=\"variable constant_\">INFO</span> org.quartz.core.<span class=\"title class_\">QuartzScheduler</span> - <span class=\"title class_\">Scheduler</span> <span class=\"title class_\">DefaultQuartzScheduler</span>_<span class=\"variable\">$_NON_CLUSTERED</span> shutdown complete.</span><br><span class=\"line\"></span><br><span class=\"line\">进程已结束，退出代码为 <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Job注入Bean\">Job注入Bean</h4>\n<h5 id=\"在Job中操作数据库\">在Job中操作数据库</h5>\n<blockquote>\n<p>但是Job中不能直接注入数据层，解决办法：</p>\n<ol>\n<li>\n<p>借助JobDataMap ： 在构建  <code>JobDetail</code> 的时候  将数据放入<code>JobDataMap</code>，基本类型的数据通过<code>usingJobData</code>方法直接放入，mapper这种类型数据手动put进去；</p>\n</li>\n<li>\n<p>使用静态工具类</p>\n</li>\n</ol>\n</blockquote>\n<h6 id=\"借助JobDataMap\">借助JobDataMap</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\">   StudentMapper studentMapper;</span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test1</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">       <span class=\"type\">JobDetail</span> <span class=\"variable\">jobDetail</span> <span class=\"operator\">=</span> JobBuilder.newJob(PrintlnWordsJob_.class)</span><br><span class=\"line\">               .withIdentity(<span class=\"string\">&quot;Job_1&quot;</span>, <span class=\"string\">&quot;name_1&quot;</span>)</span><br><span class=\"line\">               .usingJobData(<span class=\"string\">&quot;jobName&quot;</span>,<span class=\"string\">&quot;student&quot;</span>)</span><br><span class=\"line\">               .build();</span><br><span class=\"line\">       jobDetail.getJobDataMap().put(<span class=\"string\">&quot;studentMapper&quot;</span>,studentMapper);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MajorJob</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Job</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(JobExecutionContext jobExecutionContext)</span> <span class=\"keyword\">throws</span> JobExecutionException &#123;</span><br><span class=\"line\">        <span class=\"type\">JobDataMap</span> <span class=\"variable\">jobDataMap</span> <span class=\"operator\">=</span> jobExecutionContext.getJobDetail().getJobDataMap();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">jobName</span> <span class=\"operator\">=</span> jobDataMap.getString(<span class=\"string\">&quot;jobName&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">StudentMapper</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> (StudentMapper)jobDataMap.get(<span class=\"string\">&quot;student&quot;</span>);</span><br><span class=\"line\">        List&lt;Student&gt; students = student.queryList();</span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                + DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(LocalDateTime.now()) + <span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                + jobName + <span class=\"string\">&quot;--&quot;</span> + students);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"静态工具类\">静态工具类</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.Quartz;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.BeansException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.ApplicationContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.ApplicationContextAware;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Locale;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SpringContextJobUtil</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">ApplicationContextAware</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ApplicationContext context;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&quot;static-access&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setApplicationContext</span><span class=\"params\">(ApplicationContext context)</span> <span class=\"keyword\">throws</span> BeansException &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.context = context;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据name获取bean</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> beanName name</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bean对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Object <span class=\"title function_\">getBean</span><span class=\"params\">(String beanName)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> context.getBean(beanName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title function_\">getMessage</span><span class=\"params\">(String key)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> context.getMessage(key, <span class=\"literal\">null</span>, Locale.getDefault());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MajorJob</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Job</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(JobExecutionContext jobExecutionContext)</span> <span class=\"keyword\">throws</span> JobExecutionException &#123;</span><br><span class=\"line\">        <span class=\"type\">JobDataMap</span> <span class=\"variable\">jobDataMap</span> <span class=\"operator\">=</span> jobExecutionContext.getJobDetail().getJobDataMap();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">jobName</span> <span class=\"operator\">=</span> jobDataMap.getString(<span class=\"string\">&quot;jobName&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">StudentMapper</span> <span class=\"variable\">student</span> <span class=\"operator\">=</span> (StudentMapper) SpringContextJobUtil.getBean(<span class=\"string\">&quot;StudentMapper&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//StudentMapper student = (StudentMapper)jobDataMap.get(&quot;student&quot;);</span></span><br><span class=\"line\">        List&lt;Student&gt; students = student.queryList();</span><br><span class=\"line\">        </span><br><span class=\"line\">        System.out.println(Thread.currentThread().getName() + <span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                + DateTimeFormatter.ofPattern(<span class=\"string\">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(LocalDateTime.now()) + <span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                + jobName + <span class=\"string\">&quot;--&quot;</span> + students);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"Quartz-持久化\">Quartz 持久化</h4>\n<p>定时任务的诸多要素，如任务名称、数量、状态、运行频率、运行时间等，是要<code>存储</code>起来的。<code>JobStore</code>，就是用来存储任务和触发器相关的信息的。</p>\n<p>Quartz 中有两种存储任务的方式，一种在在内存（<code>RAMJobStore</code>），一种是在数据库（<code>JDBCJobStore</code>）。</p>\n<p>Quartz 默认的 <code>JobStore</code> 是 <code>RAMJobstore</code>，也就是把任务和触发器信息运行的信息存储在内存中，用到了 <code>HashMap</code>、<code>TreeSet</code>、<code>HashSet</code> 等等数据结构，如果程序崩溃或重启，所有存储在内存中的数据都会丢失。所以我们需要把这些数据持久化到磁盘。</p>\n<p>==Quartz持久化配置提供了两种存储器：==</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">优点</th>\n<th style=\"text-align:left\">缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">RAMJobStore</td>\n<td style=\"text-align:left\">不要外部数据库，配置容易，运行速度快</td>\n<td style=\"text-align:left\">因为调度程序信息是存储在被分配给 JVM 的内存里面，所以，当应用程序停止运行时，所有调度信息将被丢失。另外因为存储到JVM内存里面，所以可以存储多少个 Job 和 Trigger 将会受到限制</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">JDBC 作业存储</td>\n<td style=\"text-align:left\">支持集群，因为所有的任务信息都会保存到数据库中，可以控制事物，还有就是如果应用服务器关闭或者重启，任务信息都不会丢失，并且可以恢复因服务器关闭或者重启而导致执行失败的任务</td>\n<td style=\"text-align:left\">运行速度的快慢取决与连接数据库的快慢</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">详见  ：</span><br><span class=\"line\">  https:<span class=\"comment\">//www.cnblogs.com/summerday152/p/14193968.html#quartz%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"详解\">详解</h2>\n<h3 id=\"Job接口\">Job接口</h3>\n<p>接口中只有一个方法：<code>execute()</code>，自定义任务类的时候要<code>重写</code>这个的方法，使用<code>JobBuilder</code>将具体任务类包装成一个<code>JobDetail</code>（使用了建造者模式）交给<code>Scheduler</code>管理。每个<code>JobDetail</code>由name和group作为其唯一身份标识。</p>\n<h3 id=\"Trigger\">Trigger</h3>\n<p>Trigger有四类实现，分别如下：</p>\n<ul>\n<li><strong>SimpleTrigger</strong>：简单触发器，支持定义任务执行的间隔时间，执行次数的规则有两种，一是定义重复次数，二是定义开始时间和结束时间。如果同时设置了结束时间与重复次数，先结束的会覆盖后结束的，以先结束的为准。</li>\n<li><strong>CronTrigger</strong>：基于Cron表达式的触发器。</li>\n<li><strong>CalendarIntervalTrigger</strong>：基于日历的触发器，比简单触发器更多时间单位，且能智能区分大小月和平闰年。</li>\n<li><strong>DailyTimeIntervalTrigger</strong>：基于日期的触发器，如每天的某个时间段。</li>\n</ul>\n<p>Trigger是有状态的：<code>NONE</code>, <code>NORMAL</code>, <code>PAUSED</code>, <code>COMPLETE</code>, <code>ERROR</code>, <code>BLOCKED</code>，状态之间转换关系：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">NONE</span>---------启动------&gt;<span class=\"title class_\">Normal</span>-----结束------&gt;<span class=\"variable constant_\">NONE</span></span><br><span class=\"line\">\t\t\t\t\t\t🔼 |<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">  \t\t\t恢复  </span>| |<span class=\"params\">暂停</span></span><br><span class=\"line\"><span class=\"params\">  \t\t\t\t\t  </span>| 🔽</span><br><span class=\"line\">  \t\t\t\t\t <span class=\"variable constant_\">PAUSED</span>--------------过期-----&gt;<span class=\"variable constant_\">COMPLETE</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Secheduler\">Secheduler</h3>\n<p>调度器，是 Quartz 的指挥官，由 <code>StdSchedulerFactory</code> 产生，它是单例的。Scheduler中提供了 <code>Quartz</code> 中最重要的 API，默认是实现类是 <code>StdScheduler</code>。</p>\n<p><code>Scheduler</code>中主要的API大概分为三种：</p>\n<ul>\n<li><strong>操作Scheduler本身</strong>：例如<code>start</code>、<code>shutdown</code>等；</li>\n<li><strong>操作Job</strong>：例如：<code>addJob</code>、<code>pauseJob</code>、<code>pauseJobs</code>、<code>resumeJob</code>、<code>resumeJobs</code>、<code>getJobKeys</code>、<code>getJobDetail</code>等</li>\n<li><strong>操作Trigger</strong>：例如<code>pauseTrigger</code>、<code>resumeTrigger</code>等</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">graph</span><br><span class=\"line\">subgraph 基本流程</span><br><span class=\"line\">JobDetail --&gt; Scheduler</span><br><span class=\"line\">Tigger --&gt; Scheduler</span><br><span class=\"line\">SchedulerFactory --&gt; Scheduler</span><br><span class=\"line\"></span><br><span class=\"line\">job --&gt; JobBuilder --&gt; JobDetail</span><br><span class=\"line\">Tigger -.-&gt;|1...N| JobDetail</span><br><span class=\"line\">TriggerBuilder --&gt; Tigger</span><br><span class=\"line\">JobDetail --&gt;B</span><br><span class=\"line\">Tigger --&gt; C</span><br><span class=\"line\">Tigger --&gt; D</span><br><span class=\"line\"></span><br><span class=\"line\">B((JobDetail操作数据库的DS&lt;br&gt;JobDataMap&lt;br&gt;JobKey))</span><br><span class=\"line\">C((Tigger类型&lt;br&gt;SimpleTigger&lt;br&gt;CronTiggerDaily&lt;br&gt;TimeIntervalTigger&lt;br&gt;CalendarIntervalTigger))</span><br><span class=\"line\">D((Tigger状态&lt;br&gt;NONE&lt;br&gt;NORMA`&lt;br&gt;PAUSED&lt;br&gt;COMPLETE&lt;br&gt;ERROR&lt;br&gt;BLOCKED&lt;br&gt;))</span><br><span class=\"line\">Listener -.-&gt;|监听| JobDetail</span><br><span class=\"line\">Listener -.-&gt;|监听| Tigger</span><br><span class=\"line\">Listener -.-&gt;|监听| Scheduler</span><br><span class=\"line\">end</span><br><span class=\"line\"></span><br><span class=\"line\">subgraph 持久化</span><br><span class=\"line\">JobStore --&gt; RAMjobStore</span><br><span class=\"line\">JobStore --&gt; JDBCjobStore</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>\n","_path":"post/e330525.html","_link":"http://rycan.top/post/e330525.html","_id":"cloioo9dy0026ni0p7te33iq9"}}