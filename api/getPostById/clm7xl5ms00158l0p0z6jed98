{"type":"getPostById","data":{"title":"MybatisPlus","date":"2023-07-03T12:31:32.000Z","description":"MybatisPlus","categories":[{"name":"框架","_id":"clm7xl5mh00048l0pa5ts3fb9"}],"tags":[{"name":"MybatisPlus","_id":"clm7xl5n0002n8l0p506lea8h"}],"content":"<meta name=\"referrer\" content=\"no-referrer\">\n<h1>MyBatis-Plus</h1>\n<h2 id=\"一、基本介绍\">一、基本介绍</h2>\n<h3 id=\"1-简介\">1.简介</h3>\n<p><a href=\"https://github.com/baomidou/mybatis-plus\">MyBatis-Plus (opens new window)</a>（简称 MP）是一个 <a href=\"https://www.mybatis.org/mybatis-3/\">MyBatis (opens new window)</a>的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>\n<blockquote>\n<p>我们的愿景是成为 MyBatis 最好的搭档，就像 <a href=\"https://baomidou.com/img/contra.jpg\">魂斗罗</a> 中的 1P、2P，基友搭配，效率翻倍。</p>\n</blockquote>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/relationship-with-mybatis.png\" alt></p>\n<h3 id=\"2-特性\">2.特性</h3>\n<ul>\n<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>\n<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>\n<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>\n<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>\n<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>\n<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>\n<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>\n<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>\n<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>\n<li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>\n<li><strong>内置性能分析插件</strong>：可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>\n<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>\n</ul>\n<h3 id=\"3-支持数据库\">3.支持数据库</h3>\n<blockquote>\n<p>任何能使用 <code>MyBatis</code> 进行 CRUD, 并且支持标准 SQL 的数据库，具体支持情况如下，如果不在下列表查看分页部分教程 PR 您的支持。</p>\n</blockquote>\n<ul>\n<li>MySQL，Oracle，DB2，H2，HSQL，SQLite，PostgreSQL，SQLServer，Phoenix，Gauss ，ClickHouse，Sybase，OceanBase，Firebird，Cubrid，Goldilocks，csiidb</li>\n<li>达梦数据库，虚谷数据库，人大金仓数据库，南大通用(华库)数据库，南大通用数据库，神通数据库，瀚高数据库</li>\n</ul>\n<h3 id=\"4-框架结构\">4.框架结构</h3>\n<img src=\"https://baomidou.com/img/mybatis-plus-framework.jpg\" alt=\"framework\" style=\"zoom:50%;\">\n<h3 id=\"5-官方地址\">5.官方地址</h3>\n<blockquote>\n<p>**官方网站：**<a href=\"https://baomidou.com/\">https://baomidou.com/</a></p>\n<p>**官方文档：**<a href=\"https://baomidou.com/pages/24112f/\">https://baomidou.com/pages/24112f/</a></p>\n</blockquote>\n<h2 id=\"二、入门案例\">二、入门案例</h2>\n<h3 id=\"1-开发环境准备\">1.开发环境准备</h3>\n<ul>\n<li><strong>IDE：IDEA 2020.3</strong></li>\n<li><strong>JDK：JDK8+</strong></li>\n<li><strong>构建工具：Maven 3.5.4</strong></li>\n<li><strong>MySQL：MySQL 8.0.28</strong></li>\n<li><strong>Navicat：Navicat Premium 15</strong></li>\n<li><strong>Spring Boot：2.3.4.RELEASE</strong></li>\n<li><strong>MyBatis-Plus：3.5.1</strong></li>\n</ul>\n<h3 id=\"2-建库建表\">2.建库建表</h3>\n<ul>\n<li>\n<p><strong>打开Navicat运行以下SQL脚本进行建库建表</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `<span class=\"keyword\">user</span>` (</span><br><span class=\"line\">  `id` <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">  `user_name` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户名&#x27;</span>,</span><br><span class=\"line\">  `password` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB AUTO_INCREMENT<span class=\"operator\">=</span><span class=\"number\">5</span> <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span>  <span class=\"keyword\">into</span> </span><br><span class=\"line\">`<span class=\"keyword\">user</span>`(`id`,`user_name`,`password`,`name`,`age`,`address`) </span><br><span class=\"line\"><span class=\"keyword\">values</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"string\">&#x27;ruiwen&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;瑞文&#x27;</span>,<span class=\"number\">12</span>,<span class=\"string\">&#x27;山东&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"string\">&#x27;gailun&#x27;</span>,<span class=\"string\">&#x27;1332&#x27;</span>,<span class=\"string\">&#x27;盖伦&#x27;</span>,<span class=\"number\">13</span>,<span class=\"string\">&#x27;平顶山&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"string\">&#x27;timu&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;提姆&#x27;</span>,<span class=\"number\">22</span>,<span class=\"string\">&#x27;蘑菇石&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"string\">&#x27;daji&#x27;</span>,<span class=\"string\">&#x27;1222&#x27;</span>,<span class=\"string\">&#x27;妲己&#x27;</span>,<span class=\"number\">221</span>,<span class=\"string\">&#x27;狐山&#x27;</span>);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"3-maven工程操作\">3.maven工程操作</h3>\n<h4 id=\"1、引入MyBatis-Plus的依赖\">1、引入<code>MyBatis-Plus</code>的依赖</h4>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"2、配置yml\">2、配置yml</h4>\n<p><strong>配置<code>application.yml</code>文件</strong></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/MyBatisPlus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&#x27;00000000&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"comment\">#配置数据源类型</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.zaxxer.hikari.HikariDataSource</span></span><br><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>\n<p><strong>日志效果：</strong></p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111528989.png\" alt></p>\n<h4 id=\"3、自建启动类\">3、自建启动类</h4>\n<p>并添加 <code>@MapperScan</code> 注解，扫描 Mapper 文件夹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@MapperScan(&quot;com.ry.mp.mapper&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RyApplication</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        SpringApplication.run(RyApplication.class,args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"4、编写实体类\">4、编写实体类</h4>\n<p><code>User.java</code>（此处使用了 Lombok 简化代码）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String email;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>编写 Mapper 包下的 <code>UserMapper</code>接口</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-测试查询\">4.测试查询</h3>\n<p>编写一个测试类<code>mpTest.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Arrays;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span>   <span class=\"comment\">// 建立 maven-project 一定要自己加上，不然会报错   ，springboot 工程会自己创建</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MpTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectList</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        List&lt;User&gt; users = userMapper.selectList(<span class=\"literal\">null</span>);   <span class=\"comment\">//可以是null</span></span><br><span class=\"line\">        users.forEach(System.out::println);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>控制台打印查询结果</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111241899.png\" alt></p>\n<h2 id=\"三、MP增删改查\">三、MP增删改查</h2>\n<h3 id=\"1-Mapper层\">1.Mapper层</h3>\n<h4 id=\"1-1BaseMapper-T-介绍\">1.1BaseMapper&lt;T&gt;介绍;</h4>\n<blockquote>\n<p>说明:</p>\n<ul>\n<li>通用 CRUD 封装BaseMapper 接口，为 <code>Mybatis-Plus</code> 启动时自动解析实体表关系映射转换为 <code>Mybatis</code> 内部对象注入容器</li>\n<li>泛型 <code>T</code> 为任意实体对象</li>\n<li>参数 <code>Serializable</code> 为任意类型主键 <code>Mybatis-Plus</code> 不推荐使用复合主键约定每一张表都有自己的唯一 <code>id</code> 主键</li>\n<li>对象 <code>Wrapper</code> 为条件构造器</li>\n</ul>\n</blockquote>\n<p>MyBatis-Plus中的基本CRUD在内置的BaseMapper中都已得到了实现，因此我们继承该接口以后可以直接使用。</p>\n<h4 id=\"1-2BaseMapper中提供的所有CRUD方法：\">1.2BaseMapper中提供的所有CRUD方法：</h4>\n<h6 id=\"增加：Insert\"><strong>增加：Insert</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 插入一条记录</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">insert</span><span class=\"params\">(T entity)</span>;</span><br></pre></td></tr></table></figure>\n<h6 id=\"删除：Delete\"><strong>删除：Delete</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">delete</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">deleteBatchIds</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">deleteById</span><span class=\"params\">(Serializable id)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">deleteByMap</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br></pre></td></tr></table></figure>\n<h6 id=\"修改：Update\"><strong>修改：Update</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 whereWrapper 条件，更新记录</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">update</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.ENTITY)</span> T updateEntity, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 修改</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">updateById</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.ENTITY)</span> T entity)</span>;</span><br></pre></td></tr></table></figure>\n<h6 id=\"查询：Select\"><strong>查询：Select</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\">T <span class=\"title function_\">selectById</span><span class=\"params\">(Serializable id)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询一条记录</span></span><br><span class=\"line\">T <span class=\"title function_\">selectOne</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">selectBatchIds</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询全部记录</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">selectList</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">selectByMap</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; <span class=\"title function_\">selectMaps</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录。注意： 只返回第一个字段的值</span></span><br><span class=\"line\">List&lt;Object&gt; <span class=\"title function_\">selectObjs</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，查询全部记录（并翻页）</span></span><br><span class=\"line\">IPage&lt;T&gt; <span class=\"title function_\">selectPage</span><span class=\"params\">(IPage&lt;T&gt; page, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录（并翻页）</span></span><br><span class=\"line\">IPage&lt;Map&lt;String, Object&gt;&gt; <span class=\"title function_\">selectMapsPage</span><span class=\"params\">(IPage&lt;T&gt; page, <span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class=\"line\">Integer <span class=\"title function_\">selectCount</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"1-3-非条件中构造器\">1.3.非条件中构造器</h4>\n<blockquote>\n<p>Mapper—非条件构造器的一般的CRUD</p>\n</blockquote>\n<blockquote>\n<p>此时不需要XXXXMapper.xml文件，只要XXXMapper.java就可以了</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;<span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">XXXMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class=\"line\">&gt;&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h5 id=\"注：\">注：</h5>\n<p>所有都在下面的测试类中实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span>   <span class=\"comment\">// 要加，不然会报错</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MpTest</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"2-1插入\">2.1\t插入</h5>\n<hr>\n<blockquote>\n<p><strong>最终执行的结果，所获取的id为1634115490229858305</strong></p>\n<p>这是因为MyBatis-Plus在实现插入数据时，会==默认基于雪花算法==的策略生成id</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试插入一条数据</span></span><br><span class=\"line\"><span class=\"comment\">  * MyBatis-Plus在实现插入数据时，会默认基于雪花算法的策略生成id</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testInsert</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">        user.setName(<span class=\"string\">&quot;nike&quot;</span>);</span><br><span class=\"line\">        user.setUserName(<span class=\"string\">&quot;信&quot;</span>);</span><br><span class=\"line\">        user.setAddress(<span class=\"string\">&quot;南京&quot;</span>);</span><br><span class=\"line\">        user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">        user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">        System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">        <span class=\"comment\">//1634115490229858305（当前 id 为雪花算法自动生成的id）</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;id自动获取&quot;</span> + user.getId());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101654928.png\" alt></p>\n<h5 id=\"2-2删除\">2.2\t删除</h5>\n<hr>\n<h6 id=\"a、根据ID删除数据\">a、根据ID删除数据</h6>\n<blockquote>\n<p><strong>调用方法：int deleteById(Serializable id);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id删除一条数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteById</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.deleteById(<span class=\"number\">1634115490229858305L</span>);   <span class=\"comment\">//要加上L，否则报错</span></span><br><span class=\"line\">     System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111301056.png\" alt></p>\n<h6 id=\"b、根据ID批量删除数据\">b、根据ID批量删除数据</h6>\n<blockquote>\n<p><strong>调用方法：int deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试通过id批量删除数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteBatchIds</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Long&gt; ids = Arrays.asList(<span class=\"number\">6L</span>,<span class=\"number\">7L</span>,<span class=\"number\">8L</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.deleteBatchIds(ids);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111302900.png\" alt=\"image-20230311130255832\" style=\"zoom:25%;\">\n<h6 id=\"c、根据Map条件删除数据\">c、根据Map条件删除数据</h6>\n<blockquote>\n<p><strong>调用方法：int deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 测试根据Map集合中所设置的条件删除数据</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteByMap</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//当前演示为根据name和age删除数据</span></span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：DELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;Vz&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">21</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.deleteByMap(map);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101706678.png\" alt=\"image-20230310170641640\" style=\"zoom:25%;\">\n<h5 id=\"2-3修改\">2.3\t修改</h5>\n<blockquote>\n<p><strong>调用方法：int updateById(@Param(Constants.ENTITY) T entity);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id修改用户信息</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testUpdateById</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//执行SQL为： UPDATE user SET name=?, age=?, email=? WHERE id=?</span></span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">        user.setId(<span class=\"number\">1L</span>);</span><br><span class=\"line\">        user.setName(<span class=\"string\">&quot;赵信&quot;</span>);</span><br><span class=\"line\">        user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.updateById(user);</span><br><span class=\"line\">        System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101711605.png\" alt=\"image-20230310171109574\" style=\"zoom:25%;\">\n<h5 id=\"2-4查询\">2.4\t查询</h5>\n<hr>\n<h6 id=\"a、根据ID查询用户信息\">a、根据ID查询用户信息</h6>\n<blockquote>\n<p><strong>调用方法：T selectById(Serializable id);</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试根据id查询用户数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectById</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//SELECT id,user_name,password,name,age,address FROM user WHERE id=?</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> userMapper.selectById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">    System.out.println(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"b、根据多个ID查询多个用户信息\">b、根据多个ID查询多个用户信息</h6>\n<blockquote>\n<p><strong>调用方法：List<T> selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据多个id查询用户数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectBatchIds</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class=\"line\">    List&lt;Long&gt; ids = Arrays.asList(<span class=\"number\">1L</span>,<span class=\"number\">2L</span>,<span class=\"number\">3L</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectBatchIds(ids);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111306200.png\" alt=\"image-20230311130640172\" style=\"zoom:25%;\">\n<h6 id=\"c、根据Map条件查询用户信息\">c、根据Map条件查询用户信息</h6>\n<blockquote>\n<p><strong>调用方法：List<T> selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据Map所设置的条件查询用户</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectByMap</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为：SELECT id,name,age,email FROM user WHERE age = ?</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">18</span>);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111307659.png\" alt=\"image-20230311130705582\" style=\"zoom:25%;\">\n<h6 id=\"d、查询所有用户信息\">d、查询所有用户信息</h6>\n<blockquote>\n<p><strong>调用方法：List<T> selectList(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);</T></T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 测试查询所有数据</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testSelectList</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111307754.png\" alt=\"image-20230311130730700\" style=\"zoom:25%;\">\n<h4 id=\"1-4-自定义功能实现\">1.4.自定义功能实现</h4>\n<h6 id=\"Mapper接口\">Mapper接口</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Repository</span>    <span class=\"comment\">// private UserMapper userMapper;就不会报红</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *根据id查询用户信息为map集合</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; <span class=\"title function_\">selectMapById</span><span class=\"params\">(Long id)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"Mapper-xml\">Mapper.xml</h6>\n<blockquote>\n<p>位置在<code>src/main/resources/mapper</code>包中</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"keyword\">PUBLIC</span> <span class=\"string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"string\">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.ry.mp.mapper.UserMapper&quot;</span>&gt;</span> \t<span class=\"comment\">&lt;!-- XXMapaper.java的位置 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--    Map&lt;String,Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectMapById&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;map&quot;</span>&gt;</span></span><br><span class=\"line\">        select id,name,address  from user where id=#&#123;id&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"测试方法\">测试方法</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectByMap</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//   执行SQL为：SELECT id,name,age,address FROM user WHERE age = ?</span></span><br><span class=\"line\">     Map&lt;String, Object&gt; map = userMapper.selectMapById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">     System.out.println(map);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101723873.png\" alt></p>\n<h4 id=\"1-5条件构造器\">1.5条件构造器</h4>\n<p>[完整的AbstractWrapper方法][<a href=\"https://baomidou.com/guide/wrapper.html#abstractwrapper\">https://baomidou.com/guide/wrapper.html#abstractwrapper</a>]</p>\n<h5 id=\"1-5-1-Wrapper介绍\">1.5.1 Wrapper介绍</h5>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111453118.png\" alt=\"image-20220521092812125\" style=\"zoom:33%;\">\n<ul>\n<li>\n<p><code>Wrapper</code> ： 条件构造抽象类，最顶端父类</p>\n<ul>\n<li><code>AbstractWrapper </code>： 用于查询条件封装，生成 sql 的 where 条件\n<ul>\n<li><code>QueryWrapper </code>： 查询条件封装</li>\n<li><code>UpdateWrapper </code>： Update 条件封装</li>\n<li><code>AbstractLambdaWrapper </code>： 使用Lambda 语法</li>\n<li><code>LambdaQueryWrapper </code>：用于Lambda语法使用的查询Wrapper</li>\n<li><code>LambdaUpdateWrapper </code>： Lambda 更新封装Wrapper</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;eq：equals，等于</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;gt：greater than ，大于 &gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;ge：greater than or equals，大于等于≥</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;lt：less than，小于&lt;</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;le：less than or equals，小于等于≤</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;between：相当于SQL中的BETWEEN</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;like：模糊匹配。like(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;黄&quot;</span>)，相当于SQL的name like <span class=\"string\">&#x27;%黄%&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;likeRight：模糊匹配右半边。likeRight(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;黄&quot;</span>)，相当于SQL的name like <span class=\"string\">&#x27;黄%&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;likeLeft：模糊匹配左半边。likeLeft(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;黄&quot;</span>)，相当于SQL的name like <span class=\"string\">&#x27;%黄&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;notLike：notLike(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;黄&quot;</span>)，相当于SQL的name not like <span class=\"string\">&#x27;%黄%&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;isNull</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;isNotNull</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;and：SQL连接符AND</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;or：SQL连接符OR</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;in: in(“age<span class=\"string\">&quot;,&#123;1,2,3&#125;)相当于 age in(1,2,3)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&gt;groupBy: groupBy(&quot;</span>id<span class=\"string\">&quot;,&quot;</span>name<span class=\"string\">&quot;)相当于 group by id,name</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&gt;orderByAsc :orderByAsc(&quot;</span>id<span class=\"string\">&quot;,&quot;</span>name<span class=\"string\">&quot;)相当于 order by id ASC,name ASC</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&gt;orderByDesc :orderByDesc (&quot;</span>id<span class=\"string\">&quot;,&quot;</span>name<span class=\"string\">&quot;)相当于 order by id DESC,name DESC</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<h5 id=\"1-5-2-QueryWrapper\">1.5.2 QueryWrapper</h5>\n<h6 id=\"组装查询条件\"><strong>组装查询条件</strong></h6>\n<blockquote>\n<p>**执行SQL：SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age BETWEEN ? AND ? AND name IS NOT NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//查询用户名包含a，年龄在20到30之间，name信息不为null的用户信息</span></span><br><span class=\"line\">      QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">      <span class=\"comment\">//数据库中的字段，而不是User类的属性</span></span><br><span class=\"line\">      <span class=\"comment\">//isDelete = 1 的也不会查询到</span></span><br><span class=\"line\">      queryWrapper</span><br><span class=\"line\">              .like(<span class=\"string\">&quot;user_name&quot;</span>,<span class=\"string\">&quot;a&quot;</span>)</span><br><span class=\"line\">              .between(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">10</span>,<span class=\"number\">30</span>)</span><br><span class=\"line\">              .isNotNull(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">      List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">      users.forEach(System.out::println);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102004329.png\" alt></p>\n<h6 id=\"组装排序条件\"><strong>组装排序条件</strong></h6>\n<blockquote>\n<p>**执行SQL：SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,uid ASC</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//查询用户信息，按照年龄的降序排序，若年龄相同，则按照id升序排序</span></span><br><span class=\"line\">       QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">       queryWrapper.orderByDesc(<span class=\"string\">&quot;age&quot;</span>).orderByAsc(<span class=\"string\">&quot;uid&quot;</span>);</span><br><span class=\"line\">       List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">       users.forEach(System.out::println);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222407.png\" alt></p>\n<h6 id=\"组装删除条件\"><strong>组装删除条件</strong></h6>\n<blockquote>\n<p>**执行SQL：**UPDATE t_user SET is_deleted=1 WHERE is_deleted=0 AND (name IS NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test03</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//删除邮箱地址为null的用户信息</span></span><br><span class=\"line\">       QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">       queryWrapper.isNull(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.delete(queryWrapper);</span><br><span class=\"line\">       System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102010582.png\" alt></p>\n<h6 id=\"条件的优先级\"><strong>条件的优先级</strong></h6>\n<blockquote>\n<p>下面两个例子的查询条件优先级不同</p>\n<p>test04   //将（年龄大于20并且用户名中包含有a）或邮箱为null的用户信息修改</p>\n<p>test05   //将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</p>\n</blockquote>\n<p><strong>test04</strong></p>\n<blockquote>\n<p>**执行SQL：**UPDATE t_user SET name=? WHERE is_deleted=0 AND (age &gt; ? AND user_name LIKE ? OR name IS NULL)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test04</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//将（年龄大于20并且用户名中包含有a）或邮箱为null的用户信息修改</span></span><br><span class=\"line\">      QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">      queryWrapper.gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>).like(<span class=\"string\">&quot;user_name&quot;</span>,<span class=\"string\">&quot;a&quot;</span>).or().isNull(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">      user.setU_name(<span class=\"string\">&quot;李彪&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.update(user, queryWrapper);</span><br><span class=\"line\">      System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222029.png\" alt></p>\n<p><strong>test05</strong></p>\n<blockquote>\n<p>**执行SQL：**UPDATE t_user SET name=? WHERE is_deleted=0 AND (user_name LIKE ? AND (age &gt; ? OR name IS NULL))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test05</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span></span><br><span class=\"line\">       QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">       queryWrapper</span><br><span class=\"line\">               .like(<span class=\"string\">&quot;user_name&quot;</span>,<span class=\"string\">&quot;a&quot;</span>)</span><br><span class=\"line\">               .and(i-&gt;i.gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>)<span class=\"comment\">//参数是i i.gt(...)是i的表达式    lambda表达式会优先执行</span></span><br><span class=\"line\">                   .or()</span><br><span class=\"line\">                   .isNull(<span class=\"string\">&quot;name&quot;</span>)</span><br><span class=\"line\">               );</span><br><span class=\"line\">       <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">       user.setU_name(<span class=\"string\">&quot;安琪拉&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.update(user, queryWrapper);</span><br><span class=\"line\">       System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111452661.png\" alt></p>\n<h6 id=\"组装select子句\"><strong>组装select子句</strong></h6>\n<blockquote>\n<p><strong>执行SQL：</strong> SELECT user_name,age,name FROM t_user WHERE is_deleted=0</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test06</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询用户的用户名、年龄、邮箱信息</span></span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.select(<span class=\"string\">&quot;username&quot;</span>,<span class=\"string\">&quot;age&quot;</span>,<span class=\"string\">&quot;email&quot;</span>);</span><br><span class=\"line\">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class=\"line\">    maps.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111452957.png\" alt=\"image-20230310202705633\" style=\"zoom:33%;\">\n<h6 id=\"实现子查询\"><strong>实现子查询</strong></h6>\n<blockquote>\n<p><strong>执行SQL：</strong> SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 AND (uid IN (select uid from t_user where uid &lt;= 100))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test07</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//查询id小于等于100的用户信息</span></span><br><span class=\"line\">       QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">       queryWrapper.inSql(<span class=\"string\">&quot;uid&quot;</span>, <span class=\"string\">&quot;select uid from t_user where uid &lt;= 100&quot;</span>);</span><br><span class=\"line\">       List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">       list.forEach(System.out::println);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111452316.png\" alt=\"image-20230310202939156\" style=\"zoom: 33%;\">\n<h6 id=\"其他\"><strong>其他</strong></h6>\n<p>一、</p>\n<blockquote>\n<p>select(Predicate<TableFieldInfo> predicate)</TableFieldInfo></p>\n</blockquote>\n<p>方法第一个参数为Predicate类型，可以使用lambda的写法，过滤要查询的字段 (主键除外) 。</p>\n<p>SQL语句如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT </span><br><span class=\"line\">\tid,user_name,PASSWORD,NAME,age </span><br><span class=\"line\">FROM </span><br><span class=\"line\">\tUSER</span><br></pre></td></tr></table></figure>\n<p>就是不想查询address这列，其他列都查询了</p>\n<p>MP写法如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelect03</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;(<span class=\"keyword\">new</span> <span class=\"title class_\">User</span>());</span><br><span class=\"line\">    queryWrapper.select(<span class=\"keyword\">new</span> <span class=\"title class_\">Predicate</span>&lt;TableFieldInfo&gt;() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">test</span><span class=\"params\">(TableFieldInfo tableFieldInfo)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> !<span class=\"string\">&quot;address&quot;</span>.equals(tableFieldInfo.getColumn());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    System.out.println(users);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>二、</p>\n<blockquote>\n<p>select(Class<T> entityClass, Predicate<TableFieldInfo> predicate)</TableFieldInfo></T></p>\n</blockquote>\n<p>方法的第一个参数为实体类的字节码对象，第二个参数为Predicate类型，可以使用lambda的写法，过滤要查询的字段 (主键除外) 。</p>\n<p>SQL语句如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT </span><br><span class=\"line\">\tid,user_name</span><br><span class=\"line\">FROM </span><br><span class=\"line\">\tUSER </span><br></pre></td></tr></table></figure>\n<p>MP写法如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelect02</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">    queryWrapper.select(User.class, <span class=\"keyword\">new</span> <span class=\"title class_\">Predicate</span>&lt;TableFieldInfo&gt;() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">test</span><span class=\"params\">(TableFieldInfo tableFieldInfo)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;user_name&quot;</span>.equals(tableFieldInfo.getColumn());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    System.out.println(users);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"1-5-3-UpdateWrapper\">1.5.3 UpdateWrapper</h5>\n<blockquote>\n<p>UpdateWrapper不仅拥有QueryWrapper的组装条件功能，还提供了set方法进行修改对应条件的数据库字段信息</p>\n<p>UPDATE t_user SET name=? WHERE is_deleted=0 AND (user_name LIKE ? AND (age &gt; ? OR name IS NULL))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test08</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span></span><br><span class=\"line\">        UpdateWrapper&lt;User&gt; updateWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">UpdateWrapper</span>&lt;&gt;();</span><br><span class=\"line\">        updateWrapper</span><br><span class=\"line\">                .like(<span class=\"string\">&quot;user_name&quot;</span>,<span class=\"string\">&quot;a&quot;</span>)</span><br><span class=\"line\">                .and( i -&gt; i</span><br><span class=\"line\">                        .gt(<span class=\"string\">&quot;age&quot;</span>,<span class=\"number\">20</span>)</span><br><span class=\"line\">                        .or()</span><br><span class=\"line\">                        .isNull(<span class=\"string\">&quot;name&quot;</span>)</span><br><span class=\"line\">                )</span><br><span class=\"line\">                .set(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;安琪拉&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.update(<span class=\"literal\">null</span>, updateWrapper);</span><br><span class=\"line\">        System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222939.png\" alt></p>\n<h5 id=\"1-5-4-condition\">1.5.4 condition</h5>\n<blockquote>\n<p>在真正开发的过程中，组装条件是常见的功能，而这些条件数据来源于用户输入，是可选的，因此我们在组装这些条件时，必须先判断用户是否选择了这些条件，若选择则需要组装该条件，若没有选择则一定不能组装，以免影响SQL执行的结果</p>\n</blockquote>\n<h6 id=\"思路一\"><strong>思路一</strong></h6>\n<blockquote>\n<p><strong>执行SQL：</strong> SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age &lt;= ?)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.toolkit.StringUtils;   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test09</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">       <span class=\"type\">Integer</span> <span class=\"variable\">ageBegin</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">       <span class=\"type\">Integer</span> <span class=\"variable\">ageEnd</span> <span class=\"operator\">=</span> <span class=\"number\">30</span>;</span><br><span class=\"line\">       QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(StringUtils.isNotBlank(username))&#123;</span><br><span class=\"line\">           <span class=\"comment\">//isNotBlank判断某个字符创是否不为空字符串、不为null、不为空白符</span></span><br><span class=\"line\">           queryWrapper.like(<span class=\"string\">&quot;user_name&quot;</span>, username);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(ageBegin != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">           queryWrapper.ge(<span class=\"string\">&quot;age&quot;</span>, ageBegin);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(ageEnd != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">           queryWrapper.le(<span class=\"string\">&quot;age&quot;</span>, ageEnd);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">       list.forEach(System.out::println);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111459824.png\" alt></p>\n<h6 id=\"思路二\"><strong>思路二</strong></h6>\n<blockquote>\n<p>上面的实现方案没有问题，但是代码比较复杂，我们可以使用带condition参数的重载方法构建查询条件，简化代码的编写</p>\n</blockquote>\n<blockquote>\n<p>简化写法：</p>\n<p>SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age &lt;= ?)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test10</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">ageBegin</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"type\">Integer</span> <span class=\"variable\">ageEnd</span> <span class=\"operator\">=</span> <span class=\"number\">30</span>;</span><br><span class=\"line\">    QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">//isNotBlank判断某个字符创是否不为空字符串、不为null、不为空白符</span></span><br><span class=\"line\">    queryWrapper.like(StringUtils.isNotBlank(username),<span class=\"string\">&quot;user_name&quot;</span>, username)</span><br><span class=\"line\">    .ge(ageBegin!=<span class=\"literal\">null</span>,<span class=\"string\">&quot;age&quot;</span>, ageBegin)</span><br><span class=\"line\">    .le(ageEnd!=<span class=\"literal\">null</span>,<span class=\"string\">&quot;age&quot;</span>, ageEnd);</span><br><span class=\"line\">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class=\"line\">    list.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222483.png\" alt></p>\n<h5 id=\"1-5-5-LambdaQueryWrapper\">1.5.5 LambdaQueryWrapper</h5>\n<blockquote>\n<p>功能等同于上面的QueryWrapper，提供了Lambda表达式的语法可以避免填错列名。</p>\n<p>SELECT uid AS id,user_name,password,name AS u_name,age,address,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age &lt;= ?)</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test11</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">      <span class=\"type\">String</span> <span class=\"variable\">username</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a&quot;</span>;</span><br><span class=\"line\">      <span class=\"type\">Integer</span> <span class=\"variable\">ageBegin</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">      <span class=\"type\">Integer</span> <span class=\"variable\">ageEnd</span> <span class=\"operator\">=</span> <span class=\"number\">30</span>;</span><br><span class=\"line\">      LambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">      lambdaQueryWrapper</span><br><span class=\"line\">              .like(StringUtils</span><br><span class=\"line\">                      .isNotBlank(username), User::getUserName, username)</span><br><span class=\"line\">              .ge(ageBegin != <span class=\"literal\">null</span>, User::getAge, ageBegin)</span><br><span class=\"line\">              .le(ageEnd != <span class=\"literal\">null</span>, User::getAge, ageEnd);</span><br><span class=\"line\">      List&lt;User&gt; list = userMapper.selectList(lambdaQueryWrapper);</span><br><span class=\"line\">      list.forEach(System.out::println);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102050257.png\" alt=\"image-20230310205055147\" style=\"zoom:25%;\">\n<h5 id=\"1-5-6-LambdaUpdateWrapper\">1.5.6 LambdaUpdateWrapper</h5>\n<blockquote>\n<p>功能等同于UpdateWrapper，提供了Lambda表达式的语法可以避免填错列名。</p>\n<p>UPDATE t_user SET user_name=?,address=? WHERE is_deleted=0 AND (user_name LIKE ? AND (age &gt; ? OR address IS NULL))</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test12</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//将用户名中包含有a并且（年龄大于20或地址为null）的用户信息修改</span></span><br><span class=\"line\">      LambdaUpdateWrapper&lt;User&gt; lambdaUpdateWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class=\"line\">      lambdaUpdateWrapper</span><br><span class=\"line\">              .like(User::getUserName, <span class=\"string\">&quot;a&quot;</span>)</span><br><span class=\"line\">              .and(i -&gt; i</span><br><span class=\"line\">                      .gt(User::getAge, <span class=\"number\">20</span>)</span><br><span class=\"line\">                      .or()</span><br><span class=\"line\">                      .isNull(User::getAddress)</span><br><span class=\"line\">              );</span><br><span class=\"line\">      lambdaUpdateWrapper</span><br><span class=\"line\">              .set(User::getUserName, <span class=\"string\">&quot;阿狸&quot;</span>)</span><br><span class=\"line\">              .set(User::getAddress,<span class=\"string\">&quot;合肥&quot;</span>);</span><br><span class=\"line\">      <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.update(<span class=\"literal\">null</span>, lambdaUpdateWrapper);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;result：&quot;</span>+result);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222829.png\" alt></p>\n<h4 id=\"1-6-自定义条件构造器\">1.6 自定义条件构造器</h4>\n<h6 id=\"在Mapper接口中定义方法\">在Mapper接口中定义方法</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class=\"line\">    User <span class=\"title function_\">findMyUserByWrapper</span><span class=\"params\">(<span class=\"meta\">@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; wrapper)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"先配置xml文件的存放目录-默认就有，可不配置\">// 先配置xml文件的存放目录 &lt;默认就有，可不配置&gt;</h6>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">mapper-locations:</span> <span class=\"string\">classpath*:/mapper/**/*.xml</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"创建对应的xml映射文件及对应的标签，编写对应的SQL语句\">创建对应的xml映射文件及对应的标签，编写对应的SQL语句</h6>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"keyword\">PUBLIC</span> <span class=\"string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"string\">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.ry.mp.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--    Map&lt;String,Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectMapById&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;map&quot;</span>&gt;</span></span><br><span class=\"line\">        select id,name,address  from user where id=#&#123;id&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findMyUserByWrapper&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        默认别名就是类名且不区分大小写--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        数据库字段--&gt;</span></span><br><span class=\"line\">        select * from t_user $&#123;ew.customSqlSegment&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：不能使用#{}应该用${}</p>\n</blockquote>\n<h6 id=\"测试类：\">测试类：</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Wrapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WrapperMapperTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        QueryWrapper&lt;User&gt; queryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">        queryWrapper.ge(<span class=\"string\">&quot;age&quot;</span>, <span class=\"number\">18</span>)</span><br><span class=\"line\">                \t.eq(<span class=\"string\">&quot;address&quot;</span>, <span class=\"string\">&quot;山东&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">myUserByWrapper</span> <span class=\"operator\">=</span> userMapper.findMyUserByWrapper(queryWrapper);</span><br><span class=\"line\">        System.out.println(myUserByWrapper);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111551735.png\" alt></p>\n<h3 id=\"2-Service层\">2.Service层</h3>\n<h4 id=\"2-1-基本介绍\">2.1 基本介绍</h4>\n<blockquote>\n<p>说明:</p>\n<ul>\n<li>通用 Service CRUD 封装<code>IService</code>接口，进一步封装 CRUD 采用 <code>get 查询单行</code> <code>remove 删除</code> <code>list 查询集合</code> <code>page 分页</code> 前缀命名方式区分 <code>Mapper</code> 层避免混淆，</li>\n<li>泛型 <code>T</code> 为任意实体对象</li>\n<li>建议如果存在自定义通用 Service 方法的可能，请创建自己的 <code>IBaseService</code> 继承 <code>Mybatis-Plus</code> 提供的基类</li>\n<li>对象 <code>Wrapper</code> 为 条件构造器</li>\n</ul>\n</blockquote>\n<p>MyBatis-Plus中有一个接口 **<code>IService</code>**和其实现类 <strong><code>ServiceImpl</code></strong>，封装了常见的业务层逻辑，详情查看源码IService和ServiceImpl</p>\n<p>因此我们在使用的时候仅需在自己定义的**<code>Service</code><strong>接口中继承</strong><code>IService</code><strong>接口，在自己的实现类中实现自己的Service并继承</strong><code>ServiceImpl</code>**即可</p>\n<h6 id=\"本来自带的是：\">本来自带的是：</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// IService是接口</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">IService</span>&lt;T&gt; &#123;.......&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//ServiceImpl实现IService接口</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ServiceImpl</span>&lt;M <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;T&gt;, T&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">IService</span>&lt;T&gt; &#123;......&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"现在应该做的：\">现在应该做的：</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//自定义Service接口 继承 IService接口</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;User&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//自定义实现类 继承 ServiceImpl，并实现 自定义的Service接口</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;UserMapper, User&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>==对比==</p>\n<p><strong>以前</strong>使用Mapper方法:</p>\n<p>定义接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\">    List&lt;User&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>定义实现类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;User&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> userMapper.selectList(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>测试</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSeervice</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; list = userService.list();</span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>现在</strong>：</p>\n<p>接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;User&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>实现类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;UserMapper,User&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>测试：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSeervice</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; list = userService.list();</span><br><span class=\"line\">    System.out.println(list);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"2-2-IService中提供的所有CRUD方法\">2.2 IService中提供的所有CRUD方法</h4>\n<h5 id=\"增加：Save、SaveOrUpdate\"><strong>增加：Save、SaveOrUpdate</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 插入一条记录（选择字段，策略插入）</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">save</span><span class=\"params\">(T entity)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 插入（批量）</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 插入（批量）</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"type\">int</span> batchSize)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// TableId 注解存在更新记录，否插入一条记录</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveOrUpdate</span><span class=\"params\">(T entity)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据updateWrapper尝试更新，否继续执行saveOrUpdate(T)方法</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveOrUpdate</span><span class=\"params\">(T entity, Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 批量修改插入</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">saveOrUpdateBatch</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"type\">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除：Remove\"><strong>删除：Remove</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 entity 条件，删除记录</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">remove</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 删除</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">removeById</span><span class=\"params\">(Serializable id)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 columnMap 条件，删除记录</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">removeByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 删除（根据ID 批量删除）</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">removeByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"修改：Update-2\"><strong>修改：Update</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 UpdateWrapper 条件，更新记录 需要设置sqlset</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">update</span><span class=\"params\">(Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 whereWrapper 条件，更新记录</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">update</span><span class=\"params\">(T updateEntity, Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 ID 选择修改</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">updateById</span><span class=\"params\">(T entity)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据ID 批量更新</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">updateBatchById</span><span class=\"params\">(Collection&lt;T&gt; entityList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据ID 批量更新</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"title function_\">updateBatchById</span><span class=\"params\">(Collection&lt;T&gt; entityList, <span class=\"type\">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"查询：Get、List、Count\"><strong>查询：Get、List、Count</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\">T <span class=\"title function_\">getById</span><span class=\"params\">(Serializable id)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class=\"line\">T <span class=\"title function_\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">T <span class=\"title function_\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, <span class=\"type\">boolean</span> throwEx)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getMap</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">&lt;V&gt; V <span class=\"title function_\">getObj</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"built_in\">super</span> Object, V&gt; mapper)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询所有</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">list</span><span class=\"params\">()</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询列表</span></span><br><span class=\"line\">List&lt;T&gt; <span class=\"title function_\">list</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据ID 批量查询）</span></span><br><span class=\"line\">Collection&lt;T&gt; <span class=\"title function_\">listByIds</span><span class=\"params\">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询（根据 columnMap 条件）</span></span><br><span class=\"line\">Collection&lt;T&gt; <span class=\"title function_\">listByMap</span><span class=\"params\">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询所有列表</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; <span class=\"title function_\">listMaps</span><span class=\"params\">()</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询列表</span></span><br><span class=\"line\">List&lt;Map&lt;String, Object&gt;&gt; <span class=\"title function_\">listMaps</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询全部记录</span></span><br><span class=\"line\">List&lt;Object&gt; <span class=\"title function_\">listObjs</span><span class=\"params\">()</span>;</span><br><span class=\"line\"><span class=\"comment\">// 查询全部记录</span></span><br><span class=\"line\">&lt;V&gt; List&lt;V&gt; <span class=\"title function_\">listObjs</span><span class=\"params\">(Function&lt;? <span class=\"built_in\">super</span> Object, V&gt; mapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\">List&lt;Object&gt; <span class=\"title function_\">listObjs</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询全部记录</span></span><br><span class=\"line\">&lt;V&gt; List&lt;V&gt; <span class=\"title function_\">listObjs</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"built_in\">super</span> Object, V&gt; mapper)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 查询总记录数</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">count</span><span class=\"params\">()</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper 条件，查询总记录数</span></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">count</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"分页：Page\"><strong>分页：Page</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 根据 ID 查询</span></span><br><span class=\"line\">T <span class=\"title function_\">getById</span><span class=\"params\">(Serializable id)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录。结果集，如果是多个会抛出异常，随机取一条加上限制条件 wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class=\"line\">T <span class=\"title function_\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">T <span class=\"title function_\">getOne</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, <span class=\"type\">boolean</span> throwEx)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getMap</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class=\"line\"><span class=\"comment\">// 根据 Wrapper，查询一条记录</span></span><br><span class=\"line\">&lt;V&gt; V <span class=\"title function_\">getObj</span><span class=\"params\">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class=\"built_in\">super</span> Object, V&gt; mapper)</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-3-调用Service层实现CRUD\">2.3.调用Service层实现CRUD</h4>\n<blockquote>\n<p>我们在自己的Service接口中通过继承MyBatis-Plus提供的IService接口，不仅可以获得其提供的CRUD方法，而且还可以使用自身定义的方法。</p>\n</blockquote>\n<h6 id=\"创建UserService并继承IService\"><strong>创建<code>UserService</code>并继承<code>IService</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * UserService继承IService模板提供的基础功能 </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;User&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"创建UserService的实现类并继承ServiceImpl\"><strong>创建<code>UserService</code>的实现类并继承<code>ServiceImpl</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ServiceImpl实现了IService，提供了IService中基础功能的实现 </span></span><br><span class=\"line\"><span class=\"comment\">  * 若ServiceImpl无法满足业务需求，则可以使用自定的UserService定义方法，并在实现类中实现</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;UserMapper,User&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"测试查询记录数\"><strong>测试查询记录数</strong></h6>\n<blockquote>\n<p><strong>调用方法：int count();</strong></p>\n<p>测试类的框架：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">mpServiceTest</span> &#123;</span><br><span class=\"line\"> <span class=\"meta\">@Autowired</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testGetCount</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//查询总记录数</span></span><br><span class=\"line\">    <span class=\"comment\">//执行的SQL为：SELECT COUNT( * ) FROM user</span></span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">count</span> <span class=\"operator\">=</span> userService.count();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;总记录数：&quot;</span> + count);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"测试批量插入数据\"><strong>测试批量插入数据</strong></h6>\n<blockquote>\n<p><strong>调用方法：boolean saveBatch(Collection<T> entityList);</T></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> \t<span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"comment\">//INSERT INTO user ( id, user_name, password, age ) VALUES ( ?, ?, ?, ? )</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       List&lt;User&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>; i &lt;= <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">           <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">           user.setUserName(<span class=\"string\">&quot;ry&quot;</span>+i);</span><br><span class=\"line\">           user.setPassword(<span class=\"string\">&quot;1234&quot;</span>+i);</span><br><span class=\"line\">           user.setAge(<span class=\"number\">20</span>+i);</span><br><span class=\"line\">           list.add(user);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"type\">boolean</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> userService.saveBatch(list);<span class=\"comment\">//本质循环添加</span></span><br><span class=\"line\">       System.out.println(b ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111328514.png\" alt=\"image-20230311132831455\" style=\"zoom:25%;\">\n<h4 id=\"2-4-service自定义方法\">2.4 service自定义方法</h4>\n<h6 id=\"实体类：\">实体类：</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.time.LocalDateTime;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Orders</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 价格</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 备注</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String remark;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 用户id</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer userId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime updateTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TableField(fill = FieldFill.INSERT)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime createTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 版本</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 逻辑删除标识,0-未删除,1-已删除</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer delFlag;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"SQL创建和加入数据\">SQL创建和加入数据</h6>\n<h6 id=\"准备数据\">准备数据</h6>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE `orders` (</span><br><span class=\"line\">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `price` int(11) DEFAULT NULL COMMENT &#x27;价格&#x27;,</span><br><span class=\"line\">  `remark` varchar(100) DEFAULT NULL COMMENT &#x27;备注&#x27;,</span><br><span class=\"line\">  `user_id` int(11) DEFAULT NULL COMMENT &#x27;用户id&#x27;,</span><br><span class=\"line\">  `update_time` timestamp NULL DEFAULT NULL COMMENT &#x27;更新时间&#x27;,</span><br><span class=\"line\">  `create_time` timestamp NULL DEFAULT NULL COMMENT &#x27;创建时间&#x27;,</span><br><span class=\"line\">  `version` int(11) DEFAULT &#x27;1&#x27; COMMENT &#x27;版本&#x27;,</span><br><span class=\"line\">  `del_flag` int(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;逻辑删除标识,0-未删除,1-已删除&#x27;,</span><br><span class=\"line\">  `create_by` varchar(100) DEFAULT NULL COMMENT &#x27;创建人&#x27;,</span><br><span class=\"line\">  `update_by` varchar(100) DEFAULT NULL COMMENT &#x27;更新人&#x27;,</span><br><span class=\"line\">  PRIMARY KEY (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\">/*Data for the table `orders` */</span><br><span class=\"line\"></span><br><span class=\"line\">insert  into `orders`(`id`,`price`,`remark`,`user_id`,`update_time`,`create_time`,`version`,`del_flag`,`create_by`,`update_by`) values </span><br><span class=\"line\">(1,2000,&#x27;无&#x27;,2,&#x27;2021-08-24 21:02:43&#x27;,&#x27;2021-08-24 21:02:46&#x27;,1,0,NULL,NULL),(2,3000,&#x27;无&#x27;,3,&#x27;2021-08-24 21:03:32&#x27;,&#x27;2021-08-24 21:03:35&#x27;,1,0,NULL,NULL),(3,4000,&#x27;无&#x27;,2,&#x27;2021-08-24 21:03:39&#x27;,&#x27;2021-08-24 21:03:41&#x27;,1,0,NULL,NULL);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"接口定义方法\">接口定义方法</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;User&gt; &#123;</span><br><span class=\"line\">    User <span class=\"title function_\">test</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"实现类实现方法\">实现类实现方法</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.service.Impl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.Orders;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.OrdersMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.service.UserService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Service;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;UserMapper, User&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrdersMapper ordersMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> User <span class=\"title function_\">test</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">UserMapper</span> <span class=\"variable\">userMapper</span> <span class=\"operator\">=</span> getBaseMapper();</span><br><span class=\"line\">        List&lt;Orders&gt; orders = ordersMapper.selectList(<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> userMapper.selectById(<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"comment\">//查询用户的订单</span></span><br><span class=\"line\">        QueryWrapper&lt;Orders&gt; ordersQueryWrapper = <span class=\"keyword\">new</span> <span class=\"title class_\">QueryWrapper</span>&lt;&gt;();</span><br><span class=\"line\">        ordersQueryWrapper.eq(<span class=\"string\">&quot;id&quot;</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        List&lt;Orders&gt; orders1 = ordersMapper.selectList(ordersQueryWrapper);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"测试类\">测试类:</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelf</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    System.out.println(userService.test());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"测试结果：\">测试结果：</h6>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111614807.png\" alt></p>\n<h2 id=\"四、常用注解\">四、常用注解</h2>\n<blockquote>\n<p>MyBatis-Plus提供的注解可以帮我们解决一些数据库与实体之间相互映射的问题。</p>\n</blockquote>\n<h3 id=\"1-TableName\">1.@TableName</h3>\n<blockquote>\n<p>经过以上的测试，在使用MyBatis-Plus实现基本的CRUD时，我们并没有指定要操作的表，只是在Mapper接口继承BaseMapper时，设置了泛型User，而操作的表为user表，由此得出结论，MyBatis-Plus在确定操作的表时，由BaseMapper的泛型决定，即实体类型决定，且默认操作的表名和实体类型的类名一致。</p>\n</blockquote>\n<h4 id=\"1-1引出问题\">1.1\t引出问题</h4>\n<hr>\n<blockquote>\n<p><strong>若实体类类型的类名和要操作的表的表名不一致，会出现什么问题？</strong></p>\n</blockquote>\n<ul>\n<li>\n<p>我们将表<code>user</code>更名为<code>t_user</code>，测试查询功能</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222606.png\" alt></p>\n</li>\n<li>\n<p>程序抛出异常，<strong>Table ‘mybatis_plus.user’ doesn’t exist</strong>，因为现在的表名为<code>t_user</code>，而默认操作的表名和实体类型的类名一致，即<code>user</code>表</p>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520094126411.png\" alt></p>\n</li>\n</ul>\n<h4 id=\"1-2解决问题\">1.2\t解决问题</h4>\n<hr>\n<h5 id=\"a、使用注解解决问题\">a、使用注解解决问题</h5>\n<blockquote>\n<p><strong>在实体类类型上添加<code>@TableName(&quot;t_user&quot;)</code>，标识实体类对应的表，即可成功执行SQL语句</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"b、使用全局配置解决问题\">b、使用全局配置解决问题</h5>\n<blockquote>\n<p><strong>在开发的过程中，我们经常遇到以上的问题，即实体类所对应的表都有固定的前缀，例如 <code>t_</code> 或 <code>tbl_</code> 此时，可以使用MyBatis-Plus提供的全局配置，为实体类所对应的表名设置默认的前缀，那么就</strong>==不需要==<strong>在每个实体类上通过@TableName标识实体类对应的表</strong></p>\n</blockquote>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"comment\">#此处配置要格外注意</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">       </span><br></pre></td></tr></table></figure>\n<h3 id=\"2-TableId\">2.@TableId</h3>\n<blockquote>\n<p><strong>经过以上的测试，MyBatis-Plus在实现CRUD时，会默认将id作为主键列，并在插入数据时，默认基于雪花算法的策略生成id</strong></p>\n</blockquote>\n<h4 id=\"2-1引出问题\">2.1\t引出问题</h4>\n<hr>\n<blockquote>\n<p><strong>若实体类和表中表示主键的不是id，而是其他字段，例如uid，MyBatis-Plus会自动识别uid为主键列吗？</strong></p>\n</blockquote>\n<ul>\n<li>\n<p>我们实体类中的属性<code>id</code>改为<code>uid</code>，将表中的字段<code>id</code>也改为<code>uid</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long uid; <span class=\"comment\">//修改</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101843684.png\" alt=\"image-20230310184350578\" style=\"zoom:33%;\">\n<p>Mapper层方法测试类：<code>com.ry.mp.MpTest</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testInsert</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">&quot;信&quot;</span>);</span><br><span class=\"line\">    user.setAddress(<span class=\"string\">&quot;南京&quot;</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    <span class=\"comment\">//1634115490229858305（当前 id 为雪花算法自动生成的id）</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id自动获取&quot;</span> + user.getUid());   <span class=\"comment\">// 此时需要修改</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>程序抛出异常，<strong>Field ‘uid’ doesn’t have a default value</strong>，说明MyBatis-Plus没有将<code>uid</code>作为主键赋值</p>\n<ul>\n<li>\n<p>注意：此处报错的条件：</p>\n<p>只要数据库的uid   没有设置为auto_increment并且  type= auto就都会报错</p>\n</li>\n</ul>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222180.png\" alt></p>\n</li>\n</ul>\n<h4 id=\"2-2解决问题\">2.2\t解决问题</h4>\n<hr>\n<blockquote>\n<p><strong>在实体类中uid属性上通过<code>@TableId</code>将其标识为主键，即可成功执行SQL语句</strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId</span><span class=\"comment\">//(value = &quot;uid&quot;)//,type = IdType.AUTO)    // 添加</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long uid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>继续执行上面的测试类：</p>\n<p>注：此时的条件应该</p>\n<p>​\t\t不能有type不能是auto，应该是雪花算法</p>\n<p>​\t\t但uid能不能自增，都会出现下面的结果&lt;此时的uid在数据库及时设置为自增也并没有效果&gt;</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111349639.png\" alt></p>\n<p>否则  type设置为auto 非雪花算法      uid 要设置为auto_increment  结果应该是这样的：</p>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111354739.png\" alt=\"image-20230311135432703\" style=\"zoom:33%;\">\n<h4 id=\"2-3-TableId的value属性\">2.3\t@TableId的value属性</h4>\n<hr>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String u_name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>若实体类中主键对应的属性为id，而表中表示主键的字段为uid，此时若只在属性id上添加注解@TableId，则抛出异常<strong>Unknown column ‘id’ in ‘field list’</strong>，即MyBatis-Plus仍然会将id作为表的主键操作，而表中表示主键的是字段uid此时需要通过@TableId注解的value属性，指定表中的主键字段，<code>@TableId(&quot;uid&quot;)</code>或<code>@TableId(value=&quot;uid&quot;)</code></p>\n</blockquote>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101841376.png\" alt=\"image-20230310184134266\" style=\"zoom:45%;\">\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testInsert</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">&quot;信&quot;</span>);</span><br><span class=\"line\">    user.setAddress(<span class=\"string\">&quot;南京&quot;</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    <span class=\"comment\">//1634115490229858305（当前 id 为雪花算法自动生成的id）</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id自动获取&quot;</span> + user.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111442954.png\" alt=\"image-20230311144202913\" style=\"zoom:25%;\">\n<h4 id=\"2-4-TableId的type属性\">2.4\t@TableId的type属性</h4>\n<hr>\n<blockquote>\n<p><strong>type属性用来定义主键策略：默认雪花算法</strong></p>\n</blockquote>\n<h5 id=\"常用的主键策略：\"><strong>常用的主键策略：</strong></h5>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">IdType.ASSIGN_ID（默认）</td>\n<td style=\"text-align:center\">基于雪花算法的策略生成数据id，与数据库id是否设置自增无关</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">IdType.AUTO</td>\n<td style=\"text-align:center\">使用数据库的自增策略，注意，该类型请==确保==数据库==已经==设置了id自增</td>\n</tr>\n</tbody>\n</table>\n<p>全部主键策略定义在了枚举类<code>IdType</code>中，<code>IdType</code>有如下的取值</p>\n<ul>\n<li>\n<p><code>AUTO</code></p>\n<p>数据库ID自增，<strong>依赖于数据库</strong>。该类型请确保数据库设置了 ID自增 否则无效</p>\n</li>\n<li>\n<p><code>NONE</code></p>\n<p>未设置主键类型。若在代码中没有手动设置主键，则会根据<strong>主键的全局策略</strong>自动生成（默认的主键全局策略是基于雪花算法的自增ID）</p>\n</li>\n<li>\n<p><code>INPUT</code></p>\n<p>需要手动设置主键，若不设置。插入操作生成SQL语句时，主键这一列的值会是<code>null</code>。</p>\n</li>\n<li>\n<p><code>ASSIGN_ID</code></p>\n<p>当没有手动设置主键，即实体类中的主键属性为空时，才会自动填充，使用雪花算法</p>\n</li>\n<li>\n<p><code>ASSIGN_UUID</code></p>\n<p>当实体类的主键属性为空时，才会自动填充，使用UUID</p>\n</li>\n</ul>\n<h5 id=\"方式一-注解方式\">方式一 <strong>注解方式</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>删表中的数据之后，重新创建，&lt;注意，这里一定要截断表或者全部删除重新建表&gt;</p>\n<p>截断表：</p>\n<p>​\t\t<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222799.png\" alt=\"image-20230310193008741\" style=\"zoom:45%;\"></p>\n<p>删除并重新建表&lt;此时是：t_user  和 uid  &gt;</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> t_user</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `t_user` (</span><br><span class=\"line\">  `uid` <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">  `user_name` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户名&#x27;</span>,</span><br><span class=\"line\">  `password` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`uid`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB AUTO_INCREMENT<span class=\"operator\">=</span><span class=\"number\">5</span> <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span>  <span class=\"keyword\">into</span> `t_user`(`uid`,`user_name`,`password`,`name`,`age`,`address`) </span><br><span class=\"line\"><span class=\"keyword\">values</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"string\">&#x27;ruiwen&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;瑞文&#x27;</span>,<span class=\"number\">12</span>,<span class=\"string\">&#x27;山东&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"string\">&#x27;gailun&#x27;</span>,<span class=\"string\">&#x27;1332&#x27;</span>,<span class=\"string\">&#x27;盖伦&#x27;</span>,<span class=\"number\">13</span>,<span class=\"string\">&#x27;平顶山&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"string\">&#x27;timu&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;提姆&#x27;</span>,<span class=\"number\">22</span>,<span class=\"string\">&#x27;蘑菇石&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"string\">&#x27;daji&#x27;</span>,<span class=\"string\">&#x27;1222&#x27;</span>,<span class=\"string\">&#x27;妲己&#x27;</span>,<span class=\"number\">221</span>,<span class=\"string\">&#x27;狐山&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p>并且此时的测试方法为</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testInsert</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;nike&quot;</span>);</span><br><span class=\"line\">    user.setUserName(<span class=\"string\">&quot;信&quot;</span>);</span><br><span class=\"line\">    user.setAddress(<span class=\"string\">&quot;南京&quot;</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;添加成功！&quot;</span> : <span class=\"string\">&quot;添加失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">    <span class=\"comment\">//1634115490229858305（当前 id 为雪花算法自动生成的id）</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id自动获取&quot;</span> + user.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果在setId() 的时候手动添加了id,就不会按照策略生成对应的id了     user.setId(100L);</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101913394.png\" alt></p>\n<h5 id=\"方式二-配置全局主键策略：\">方式二 <strong>配置全局主键策略：</strong></h5>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"comment\">#此处配置要格外注意</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">        <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">      <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-TableField\">3.@TableField</h3>\n<blockquote>\n<p>经过以上的测试，我们可以发现，MyBatis-Plus在执行SQL语句时，要保证实体类中的属性名和表中的字段名一致</p>\n<p>如果实体类中的属性名和字段名不一致的情况，会出现什么问题呢？</p>\n</blockquote>\n<h5 id=\"3-1情况一\">3.1\t情况一</h5>\n<hr>\n<p>若实体类中的属性使用的是驼峰命名风格，而表中的字段使用的是下划线命名风格</p>\n<p>例如实体类属性<code>userName</code>，表中字段<code>user_name</code></p>\n<p>此时MyBatis-Plus会自动将下划线命名风格转化为驼峰命名风格</p>\n<p>相当于在MyBatis中配置</p>\n<h5 id=\"3-2情况二\">3.2\t情况二</h5>\n<hr>\n<blockquote>\n<p>若实体类中的属性和表中的字段不满足情况1</p>\n<p>例如实体类属性<code>u_name</code>，表中字段<code>name</code></p>\n<p>此时需要在实体类属性上使用<code>@TableField(&quot;name&quot;)</code>设置属性所对应的字段名</p>\n</blockquote>\n<p>如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String u_name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>测试方法：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testUpdateById</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行SQL为： UPDATE user SET name=?, age=?, email=? WHERE id=?</span></span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    user.setId(<span class=\"number\">1L</span>);</span><br><span class=\"line\">    user.setU_name(<span class=\"string\">&quot;赵信&quot;</span>);   <span class=\"comment\">// 修改</span></span><br><span class=\"line\">    user.setAge(<span class=\"number\">18</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.updateById(user);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;修改成功！&quot;</span> : <span class=\"string\">&quot;修改失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101939227.png\" alt=\"image-20230310193925148\" style=\"zoom:45%;\">\n<p>解决：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"meta\">@TableField(&quot;name&quot;)</span>   <span class=\"comment\">//解决</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String u_name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101942012.png\" alt=\"image-20230310194202963\" style=\"zoom:33%;\">\n<h5 id=\"3-3-自动填充\">3.3 自动填充</h5>\n<p>在实际项目中的表会和我们的orders表一样，有<strong>更新时间</strong>，<strong>创建时间</strong>，<strong>创建人，更新人</strong>等字段。</p>\n<p>​\t我们可以使用 <code>@TableField</code> 的 <code>fill</code>  属性来设置字段的自动填充。让我们能更方便的更新相关字段。</p>\n<h6 id=\"在对应字段上增加注解\">在对应字段上增加注解</h6>\n<p>​\t使用TableField注解的fill属性来标注哪些字段需要在自动填充，加了注解MP才会在对应的SQL中为我们预留字段。而属性值代表我们在什么进行什么操作时需要预留字段。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Orders</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 价格</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 备注</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String remark;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 用户id</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer userId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime updateTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TableField(fill = FieldFill.INSERT)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime createTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 版本</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 逻辑删除标识,0-未删除,1-已删除</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer delFlag;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"自定义填充处理器-MetaObjectHandler\">自定义填充处理器  MetaObjectHandler</h6>\n<p>MetaObjectHandler位置 <code>com/ry/mp/config/MyMetaObjectHandler.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyMetaObjectHandler</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">MetaObjectHandler</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">insertFill</span><span class=\"params\">(MetaObject metaObject)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.setFieldValByName(<span class=\"string\">&quot;createTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.setFieldValByName(<span class=\"string\">&quot;updateTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">updateFill</span><span class=\"params\">(MetaObject metaObject)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.setFieldValByName(<span class=\"string\">&quot;updateTime&quot;</span>, LocalDateTime.now(), metaObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"测试代码\">测试代码:</h6>\n<p><strong>insert</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.Orders;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.OrdersMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.sun.org.apache.bcel.internal.generic.NEW;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TableFieldTest</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrdersMapper ordersMapper;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span>  <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Orders</span> <span class=\"variable\">orders</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Orders</span>();</span><br><span class=\"line\">        orders.setPrice(<span class=\"number\">1234</span>);</span><br><span class=\"line\">        orders.setId(<span class=\"number\">123L</span>);</span><br><span class=\"line\">       <span class=\"comment\">// ordersMapper.update(orders,null);</span></span><br><span class=\"line\">        ordersMapper.insert(orders);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111616484.png\" alt></p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110544856.png\" alt></p>\n<p><strong>update</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.Orders;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.OrdersMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.sun.org.apache.bcel.internal.generic.NEW;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">TableFieldTest</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrdersMapper ordersMapper;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span>  <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Orders</span> <span class=\"variable\">orders</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Orders</span>();</span><br><span class=\"line\">        orders.setPrice(<span class=\"number\">1235</span>);     <span class=\"comment\">//修改</span></span><br><span class=\"line\">        ordersMapper.update(orders,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"comment\">// ordersMapper.insert(orders);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>效果:</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110547612.png\" alt></p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111616299.png\" alt></p>\n<h3 id=\"4-TableLogic\">4.@TableLogic</h3>\n<h4 id=\"4-1逻辑删除\">4.1\t逻辑删除</h4>\n<hr>\n<blockquote>\n<p>物理删除：真实删除，将对应数据从数据库中删除，之后查询不到此条被删除的数据</p>\n<p>逻辑删除：假删除，将对应数据中代表是否被删除字段的状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</p>\n<p>使用场景：可以进行数据恢复</p>\n</blockquote>\n<h4 id=\"4-2实现逻辑删除\">4.2\t实现逻辑删除</h4>\n<hr>\n<h6 id=\"数据库中创建逻辑删除状态列，设置默认值为0\"><strong>数据库中创建逻辑删除状态列，设置默认值为0</strong></h6>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134529809.png\" alt></p>\n<h6 id=\"实体类中添加逻辑删除属性\"><strong>实体类中添加逻辑删除属性</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"meta\">@TableField(&quot;name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String u_name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">    <span class=\"comment\">//添加</span></span><br><span class=\"line\">    <span class=\"meta\">@TableLogic</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> isDeleted;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"测试方法：\">测试方法：</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteBatchIds</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Long&gt; ids = Arrays.asList(<span class=\"number\">1L</span>,<span class=\"number\">3L</span>,<span class=\"number\">2L</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.deleteBatchIds(ids);</span><br><span class=\"line\">    System.out.println(result &gt; <span class=\"number\">0</span> ? <span class=\"string\">&quot;删除成功！&quot;</span> : <span class=\"string\">&quot;删除失败！&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;受影响的行数为：&quot;</span> + result);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 此时的删除就是修改操作了</span></span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222393.png\" alt=\"image-20230310194814739\" style=\"zoom: 33%;\">\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222916.png\" alt=\"image-20230310195310778\" style=\"zoom:33%;\">\n<h6 id=\"此时执行查询方法，查询的结果为自动添加条件is-deleted-0\"><strong>此时执行查询方法，查询的结果为自动添加条件<code>is_deleted=0</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testSelectList</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;User&gt; users = userMapper.selectList(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    users.forEach(System.out::println);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303101949037.png\" alt></p>\n<h2 id=\"五、常用插件\">五、常用插件</h2>\n<h3 id=\"1、分页插件\">1、分页插件</h3>\n<h4 id=\"1-1-自带分页插件\">1.1  自带分页插件</h4>\n<blockquote>\n<p>MyBatis Plus自带分页插件，只要简单的配置即可实现分页功能</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>添加配置类<code>MyBatisPlusConfig</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyBatisPlusConfig</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MybatisPlusInterceptor <span class=\"title function_\">mybatisPlusInterceptor</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">MybatisPlusInterceptor</span> <span class=\"variable\">interceptor</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MybatisPlusInterceptor</span>();</span><br><span class=\"line\">        <span class=\"comment\">//添加分页插件</span></span><br><span class=\"line\">        interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> <span class=\"title class_\">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> interceptor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>编写测试方法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apiguardian.api.API;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PagePluginsTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testPage</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//new Page()中的两个参数分别是   当前页码 以及 每页显示数量</span></span><br><span class=\"line\">        Page&lt;User&gt; page = <span class=\"keyword\">new</span> <span class=\"title class_\">Page</span>&lt;&gt;(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        userMapper.selectPage(page, <span class=\"literal\">null</span>);</span><br><span class=\"line\">        System.out.println(page);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111504697.png\" alt></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apiguardian.api.API;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PagePluginsTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testPage</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//new Page()中的两个参数分别是   当前页码 以及 每页显示数量</span></span><br><span class=\"line\">        Page&lt;User&gt; page = <span class=\"keyword\">new</span> <span class=\"title class_\">Page</span>&lt;&gt;(<span class=\"number\">2</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        userMapper.selectPage(page, <span class=\"literal\">null</span>);</span><br><span class=\"line\">        System.out.println(page);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102111557.png\" alt></p>\n</li>\n</ul>\n<p><strong>查看一些输出</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testPage</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//new Page()中的两个参数分别是   当前页码 以及 每页显示数量</span></span><br><span class=\"line\">    Page&lt;User&gt; page = <span class=\"keyword\">new</span> <span class=\"title class_\">Page</span>&lt;&gt;(<span class=\"number\">2</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">    userMapper.selectPage(page, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    System.out.println(page.getRecords());</span><br><span class=\"line\">    System.out.println(page.getPages());</span><br><span class=\"line\">    System.out.println(page.getTotal());</span><br><span class=\"line\">    System.out.println(page.hasNext());</span><br><span class=\"line\">    System.out.println(page.hasPrevious());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//[User(id=4, userName=阿狸, password=1222, u_name=null, age=22, address=合肥, isDeleted=0)]</span></span><br><span class=\"line\"><span class=\"comment\">//2  总共2页</span></span><br><span class=\"line\"><span class=\"comment\">//3  总共3条数据</span></span><br><span class=\"line\"><span class=\"comment\">//false   无下页</span></span><br><span class=\"line\"><span class=\"comment\">//true    有上页</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"1-2-自定义分页\">1.2 自定义分页</h4>\n<blockquote>\n<p>上面调用的是MyBatis-Plus提供的带有分页的方法，那么我们自己定义的方法如何实现分页呢？</p>\n</blockquote>\n<h6 id=\"在UserMapper接口中定义一个方法\"><strong>在<code>UserMapper</code>接口中定义一个方法</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * 根据年龄查询用户列表，分页显示 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param</span> page mybatisPlus提供的分页对象,xml中可以从里面进行取值,传递参数 Page 即自动分页,必须放在第一位 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param</span> age 年龄 </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@return</span> </span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">Page&lt;User&gt; <span class=\"title function_\">selectPageVo</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;page&quot;)</span> Page&lt;User&gt; page,<span class=\"meta\">@Param(&quot;age&quot;)</span> Integer age)</span>;</span><br></pre></td></tr></table></figure>\n<h6 id=\"在UserMapper-xml中编写SQL实现该方法\"><strong>在<code>UserMapper.xml</code>中编写SQL实现该方法</strong></h6>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectPageByage&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;User&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        默认别名就是类名且不区分大小写--&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!--        数据库字段--&gt;</span></span><br><span class=\"line\">    select uid,user_name as name,age,name from t_user where age &gt; #&#123;age&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"进行UserMapper-xml的类别的配置\"><strong>进行UserMapper.xml的类别的配置</strong></h6>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"comment\">#此处配置要格外注意</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">        <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">      <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">  <span class=\"comment\">#配置User类型别名所对应的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-aliases-package:</span> <span class=\"string\">com.ry.mp.bean</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"编写测试方法\"><strong>编写测试方法</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apiguardian.api.API;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">PagePluginsTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testPageByAge</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        Page&lt;User&gt; page = userMapper.selectPageByage(<span class=\"keyword\">new</span> <span class=\"title class_\">Page</span>&lt;User&gt;(<span class=\"number\">1</span>,<span class=\"number\">2</span>), <span class=\"number\">20</span>);</span><br><span class=\"line\">        System.out.println(page.getRecords());</span><br><span class=\"line\">        System.out.println(page.getPages());</span><br><span class=\"line\">        System.out.println(page.getTotal());</span><br><span class=\"line\">        System.out.println(page.hasNext());</span><br><span class=\"line\">        System.out.println(page.hasPrevious());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222901.png\" alt></p>\n<h4 id=\"1-3-多表分页\">1.3 多表分页</h4>\n<h5 id=\"需求\">需求</h5>\n<p>​\t我们需要去查询Orders表，并且要求查询的时候除了要获取到Orders表中的字段，还要获取到每个订单的下单用户的用户名。</p>\n<h5 id=\"准备工作\">准备工作</h5>\n<h6 id=\"SQL准备\">SQL准备</h6>\n<p>见2.4</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- select测试</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">\to.<span class=\"operator\">*</span>,u.`user_name`</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">\tt_user u,orders o</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">\to.`user_id` <span class=\"operator\">=</span> u.`uid`</span><br></pre></td></tr></table></figure>\n<h6 id=\"修改实体类\">修改实体类</h6>\n<p>增加userName字段</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.time.LocalDateTime;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Orders</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 价格</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 备注</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String remark;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 用户id</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer userId;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 更新时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime updateTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建时间</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> LocalDateTime createTime;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 版本</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 逻辑删除标识,0-未删除,1-已删除</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer delFlag;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 新增</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"实现\">实现</h5>\n<p>①定义接口，定义方法</p>\n<p>方法第一个测试定义成Page类型</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">OrdersMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;Orders&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    IPage&lt;Orders&gt; <span class=\"title function_\">findAllOrders</span><span class=\"params\">(Page&lt;Orders&gt; page)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在xml中不需要关心分页操作，MP会帮我们完成。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"keyword\">PUBLIC</span> <span class=\"string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"string\">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.ry.mp.mapper.OrdersMapper&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findAllOrders&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Orders&quot;</span>&gt;</span></span><br><span class=\"line\">        SELECT</span><br><span class=\"line\">        o.*,u.`user_name`</span><br><span class=\"line\">        FROM</span><br><span class=\"line\">        t_user u,orders o</span><br><span class=\"line\">        WHERE</span><br><span class=\"line\">        o.`user_id` = u.`uid`</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>然后调用方法测试即可</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.Orders;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.OrdersMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">mulitPagesTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrdersMapper ordersMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testOrdersPage</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        Page&lt;Orders&gt; page = <span class=\"keyword\">new</span> <span class=\"title class_\">Page</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">//设置每页大小</span></span><br><span class=\"line\">        page.setSize(<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置当前页码</span></span><br><span class=\"line\">        page.setCurrent(<span class=\"number\">1</span>);</span><br><span class=\"line\">        ordersMapper.findAllOrders(page);</span><br><span class=\"line\">        System.out.println(page.getRecords());</span><br><span class=\"line\">        System.out.println(page.getTotal());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111552223.png\" alt></p>\n<h3 id=\"2-乐观锁\">2.乐观锁</h3>\n<blockquote>\n<p><strong>作用：当要更新一条记录的时候，希望这条记录没有被别人更新</strong></p>\n</blockquote>\n<p>乐观锁的实现方式：</p>\n<ul>\n<li>取出记录时，获取当前 version</li>\n<li>更新时，带上这个 version</li>\n<li>执行更新时，<code> set version = newVersion where version = oldVersion</code></li>\n<li>如果 version 不对，就更新失败</li>\n</ul>\n<h4 id=\"2-1场景\">2.1\t场景</h4>\n<hr>\n<ul>\n<li>一件商品，成本价是80元，售价是100元。老板先是通知小李，说你去把商品价格增加50元。小李正在玩游戏，耽搁了一个小时。正好一个小时后，老板觉得商品价格增加到150元，价格太高，可能会影响销量。又通知小王，你把商品价格降低30元。</li>\n<li>此时，小李和小王同时操作商品后台系统。小李操作的时候，系统先取出商品价格100元；小王也在操作，取出的商品价格也是100元。小李将价格加了50元，并将100+50=150元存入了数据库；小王将商品减了30元，并将100-30=70元存入了数据库。是的，如果没有锁，小李的操作就完全被小王的覆盖了。</li>\n<li>现在商品价格是70元，比成本价低10元。几分钟后，这个商品很快出售了1千多件商品，老板亏1万多。</li>\n</ul>\n<h4 id=\"2-2乐观锁与悲观锁\">2.2\t乐观锁与悲观锁</h4>\n<hr>\n<ul>\n<li>上面的故事，如果是乐观锁，小王保存价格前，会检查下价格是否被人修改过了。如果被修改过了，则重新取出的被修改后的价格，150元，这样他会将120元存入数据库。</li>\n<li>如果是悲观锁，小李取出数据后，小王只能等小李操作完之后，才能对价格进行操作，也会保证最终的价格是120元。</li>\n</ul>\n<h4 id=\"2-3模拟修改冲突\">2.3\t模拟修改冲突</h4>\n<hr>\n<h5 id=\"案例引入：未加锁\">案例引入：未加锁</h5>\n<h6 id=\"数据库中增加商品表\"><strong>数据库中增加商品表</strong></h6>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_product ( </span><br><span class=\"line\">    id <span class=\"type\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主键ID&#x27;</span>, </span><br><span class=\"line\">    NAME <span class=\"type\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;商品名称&#x27;</span>, </span><br><span class=\"line\">    price <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;价格&#x27;</span>, </span><br><span class=\"line\">    VERSION <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;乐观锁版本号&#x27;</span>, </span><br><span class=\"line\">    <span class=\"keyword\">PRIMARY</span> KEY (id) </span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h6 id=\"添加一条数据\"><strong>添加一条数据</strong></h6>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> t_product (id, NAME, price) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;外星人笔记本&#x27;</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n<h6 id=\"添加一个实体类Product\"><strong>添加一个实体类<code>Product</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Product</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"添加一个Mapper接口ProductMapper\"><strong>添加一个Mapper接口<code>ProductMapper</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Repository</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ProductMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;Product&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"测试方法-2\"><strong>测试方法</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.Product;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.ProductMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LockTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProductMapper productMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testProduct01</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.小李获取商品价格</span></span><br><span class=\"line\">        <span class=\"type\">Product</span> <span class=\"variable\">productLi</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productLi.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2.小王获取商品价格</span></span><br><span class=\"line\">        <span class=\"type\">Product</span> <span class=\"variable\">productWang</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productWang.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3.小李修改商品价格+50</span></span><br><span class=\"line\">        productLi.setPrice(productLi.getPrice()+<span class=\"number\">50</span>);</span><br><span class=\"line\">        productMapper.updateById(productLi);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//4.小王修改商品价格-30</span></span><br><span class=\"line\">        productWang.setPrice(productWang.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">        productMapper.updateById(productWang);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//5.老板查询商品价格</span></span><br><span class=\"line\">        <span class=\"type\">Product</span> <span class=\"variable\">productBoss</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;老板获取的商品价格为：&quot;</span> + productBoss.getPrice());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"执行结果\"><strong>执行结果</strong></h6>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222527.png\" alt></p>\n<h4 id=\"2-4乐观锁解决问题\">2.4\t乐观锁解决问题</h4>\n<hr>\n<h5 id=\"初步实现\">初步实现</h5>\n<h6 id=\"实体类version字段添加注解-Version\"><strong>实体类<code>version</code>字段添加注解<code>@Version</code></strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Product</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span><span class=\"comment\">//标识乐观锁版本号字段</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"添加乐观锁插件配置\"><strong>添加乐观锁插件配置</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Bean</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> MybatisPlusInterceptor <span class=\"title function_\">mybatisPlusInterceptor</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">MybatisPlusInterceptor</span> <span class=\"variable\">interceptor</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MybatisPlusInterceptor</span>();</span><br><span class=\"line\">    <span class=\"comment\">//添加分页插件</span></span><br><span class=\"line\">    interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> <span class=\"title class_\">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class=\"line\">    <span class=\"comment\">//添加乐观锁插件</span></span><br><span class=\"line\">    interceptor.addInnerInterceptor(<span class=\"keyword\">new</span> <span class=\"title class_\">OptimisticLockerInnerInterceptor</span>());</span><br><span class=\"line\">    <span class=\"keyword\">return</span> interceptor;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"再次执行测试方法-注意-此时需要将数据库中的字段改回100\"><strong>再次执行测试方法</strong>&lt;注意:此时需要将数据库中的字段改回100&gt;</h6>\n<blockquote>\n<p>小李查询商品信息：</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102204141.png\" alt></p>\n<p>小王查询商品信息：</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102205164.png\" alt></p>\n<p>小李修改商品价格，自动将version+1</p>\n<p>​\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>\n<p>​\tParameters: 外星人笔记本(String), 150(Integer), 1(Integer), 1(Long), 0(Integer)</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102206433.png\" alt></p>\n<p>小王修改商品价格，此时version已更新，条件不成立，修改失败</p>\n<p>​\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>\n<p>​\tParameters: 外星人笔记本(String), 70(Integer), 1(Integer), 1(Long), 0(Integer)</p>\n<p>最终，小王修改失败，查询价格：150</p>\n<p>​\tSELECT id,name,price,version FROM t_product WHERE id=?</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222695.png\" alt></p>\n</blockquote>\n<h5 id=\"优化执行流程\"><strong>优化执行流程</strong></h5>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testProduct01</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.小李获取商品价格</span></span><br><span class=\"line\">    <span class=\"type\">Product</span> <span class=\"variable\">productLi</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productLi.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//2.小王获取商品价格</span></span><br><span class=\"line\">    <span class=\"type\">Product</span> <span class=\"variable\">productWang</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;小李获取的商品价格为：&quot;</span> + productWang.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//3.小李修改商品价格+50</span></span><br><span class=\"line\">    productLi.setPrice(productLi.getPrice()+<span class=\"number\">50</span>);</span><br><span class=\"line\">    productMapper.updateById(productLi);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//4.小王修改商品价格-30</span></span><br><span class=\"line\">    productWang.setPrice(productWang.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> productMapper.updateById(productWang);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 优化</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(result == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//操作失败，重试</span></span><br><span class=\"line\">        <span class=\"type\">Product</span> <span class=\"variable\">productNew</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">        productNew.setPrice(productNew.getPrice()-<span class=\"number\">30</span>);</span><br><span class=\"line\">        productMapper.updateById(productNew);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//5.老板查询商品价格</span></span><br><span class=\"line\">    <span class=\"type\">Product</span> <span class=\"variable\">productBoss</span> <span class=\"operator\">=</span> productMapper.selectById(<span class=\"number\">1</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;老板获取的商品价格为：&quot;</span> + productBoss.getPrice());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521230448577.png\" alt></p>\n<h2 id=\"六、通用枚举\">六、通用枚举</h2>\n<blockquote>\n<p>表中的有些字段值是固定的，例如性别（男或女），此时我们可以使用MyBatis-Plus的通用枚举来实现</p>\n</blockquote>\n<h5 id=\"问题提出\">问题提出</h5>\n<h6 id=\"数据库表添加字段sex\"><strong>数据库表添加字段<code>sex</code></strong></h6>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222609.png\" alt></p>\n<h6 id=\"创建通用枚举类型\"><strong>创建通用枚举类型</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.Enum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.EnumValue;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Getter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Getter</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> <span class=\"title class_\">sexEnum</span> &#123;</span><br><span class=\"line\">    MALE(<span class=\"number\">1</span>, <span class=\"string\">&quot;男&quot;</span>),</span><br><span class=\"line\">    FEMALE(<span class=\"number\">2</span>, <span class=\"string\">&quot;女&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@EnumValue</span> <span class=\"comment\">//将注解所标识的属性的值存储到数据库中</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> sex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sexName;</span><br><span class=\"line\"></span><br><span class=\"line\">    sexEnum(Integer sex, String sexName) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.sex = sex;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.sexName = sexName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"User实体类中添加属性sex\"><strong>User实体类中添加属性sex</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"comment\">//@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"meta\">@TableField(&quot;name&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String u_name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> sexEnum  sex;    <span class=\"comment\">//在此处</span></span><br><span class=\"line\">    <span class=\"meta\">@TableLogic</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> isDeleted;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"执行测试方法出现问题\"><strong>执行测试方法出现问题</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">    user.setName(<span class=\"string\">&quot;admin&quot;</span>);</span><br><span class=\"line\">    user.setAge(<span class=\"number\">33</span>);</span><br><span class=\"line\">    user.setSex(SexEnum.MALE);</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;result:&quot;</span>+result);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102217959.png\" alt=\"image-20230310221743803\" style=\"zoom:50%;\">\n<h5 id=\"解决：\">解决：</h5>\n<h6 id=\"配置扫描通用枚举\"><strong>配置扫描通用枚举</strong></h6>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"comment\">#此处配置要格外注意</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">        <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">       <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">  <span class=\"comment\">#配置User类型别名所对应的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-aliases-package:</span> <span class=\"string\">com.ry.mp.bean</span></span><br><span class=\"line\">    <span class=\"comment\"># 扫描通用枚举的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-enums-package:</span> <span class=\"string\">com.ry.mp.Enum</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"进行测试\"><strong>进行测试</strong></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.mp;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.mp.mapper.UserMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">EnumTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper userMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">        user.setUserName(<span class=\"string\">&quot;admin&quot;</span>);</span><br><span class=\"line\">        user.setAge(<span class=\"number\">33</span>);</span><br><span class=\"line\">        user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">        user.setSex(sexEnum.MALE);</span><br><span class=\"line\"> <span class=\"comment\">//INSERT INTO t_user ( user_name, password, age, sex, is_deleted ) VALUES (?, ?,?, ?, ? )</span></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> userMapper.insert(user);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;result:&quot;</span>+result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"测试结果\"><strong>测试结果</strong></h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303102229691.png\" alt=\"image-20230310222900606\" style=\"zoom:33%;\">\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222018.png\" alt=\"image-20230310222914709\" style=\"zoom:33%;\">\n<h2 id=\"七、多数据源\">七、多数据源</h2>\n<blockquote>\n<p>适用于多种场景：纯粹多库、 读写分离、 一主多从、 混合模式等</p>\n</blockquote>\n<p>场景说明：</p>\n<p>我们创建两个库，分别为：<code>mybatis_plus</code>（以前的库不动）与<code>mybatis_plus_1</code>（新建），将mybatis_plus库的<code>product</code>表移动到mybatis_plus_1库，这样每个库一张表，通过一个测试用例分别获取用户数据与商品数据，如果获取到说明多库模拟成功</p>\n<h3 id=\"1-创建数据库及表\">1.创建数据库及表</h3>\n<h6 id=\"创建数据库mybatis-plus-1和表product\"><strong>创建数据库<code>mybatis_plus_1</code>和表<code>product</code></strong></h6>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> DATABASE `mybatis_plus_1` <span class=\"comment\">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;</span><br><span class=\"line\">use `mybatis_plus_1`; </span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> product ( </span><br><span class=\"line\">    id <span class=\"type\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;主键ID&#x27;</span>, </span><br><span class=\"line\">    name <span class=\"type\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;商品名称&#x27;</span>, </span><br><span class=\"line\">    price <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;价格&#x27;</span>, </span><br><span class=\"line\">    version <span class=\"type\">INT</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span> COMMENT <span class=\"string\">&#x27;乐观锁版本号&#x27;</span>, </span><br><span class=\"line\">    <span class=\"keyword\">PRIMARY</span> KEY (id) </span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h6 id=\"添加测试数据到-mybatis-plus-1-的product的表中\"><strong>添加测试数据到   mybatis_plus_1  的product的表中</strong></h6>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product (id, NAME, price) <span class=\"keyword\">VALUES</span> (<span class=\"number\">1</span>, <span class=\"string\">&#x27;外星人笔记本&#x27;</span>, <span class=\"number\">100</span>);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>注：</p>\n<p>要将点击对应的数据库才能实现对执行数据可得操作</p>\n</blockquote>\n<h6 id=\"创建数据库mybatis-plus和表t-user-并添加数据\">**创建数据库<code>mybatis_plus</code>和表<code>t_user</code>**并添加数据</h6>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> `t_user` (</span><br><span class=\"line\">  `uid` <span class=\"type\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT COMMENT <span class=\"string\">&#x27;id&#x27;</span>,</span><br><span class=\"line\">  `user_name` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;用户名&#x27;</span>,</span><br><span class=\"line\">  `password` <span class=\"type\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;密码&#x27;</span>,</span><br><span class=\"line\">  `name` <span class=\"type\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;姓名&#x27;</span>,</span><br><span class=\"line\">  `age` <span class=\"type\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;年龄&#x27;</span>,</span><br><span class=\"line\">  `address` <span class=\"type\">varchar</span>(<span class=\"number\">100</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span> COMMENT <span class=\"string\">&#x27;地址&#x27;</span>,</span><br><span class=\"line\">  <span class=\"keyword\">PRIMARY</span> KEY (`id`)</span><br><span class=\"line\">) ENGINE<span class=\"operator\">=</span>InnoDB AUTO_INCREMENT<span class=\"operator\">=</span><span class=\"number\">5</span> <span class=\"keyword\">DEFAULT</span> CHARSET<span class=\"operator\">=</span>utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">insert</span>  <span class=\"keyword\">into</span> </span><br><span class=\"line\">`t_user`(`uid`,`user_name`,`password`,`name`,`age`,`address`) </span><br><span class=\"line\"><span class=\"keyword\">values</span> </span><br><span class=\"line\">(<span class=\"number\">1</span>,<span class=\"string\">&#x27;ruiwen&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;瑞文&#x27;</span>,<span class=\"number\">12</span>,<span class=\"string\">&#x27;山东&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">2</span>,<span class=\"string\">&#x27;gailun&#x27;</span>,<span class=\"string\">&#x27;1332&#x27;</span>,<span class=\"string\">&#x27;盖伦&#x27;</span>,<span class=\"number\">13</span>,<span class=\"string\">&#x27;平顶山&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">3</span>,<span class=\"string\">&#x27;timu&#x27;</span>,<span class=\"string\">&#x27;123&#x27;</span>,<span class=\"string\">&#x27;提姆&#x27;</span>,<span class=\"number\">22</span>,<span class=\"string\">&#x27;蘑菇石&#x27;</span>),</span><br><span class=\"line\">(<span class=\"number\">4</span>,<span class=\"string\">&#x27;daji&#x27;</span>,<span class=\"string\">&#x27;1222&#x27;</span>,<span class=\"string\">&#x27;妲己&#x27;</span>,<span class=\"number\">221</span>,<span class=\"string\">&#x27;狐山&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-新建工程引入依赖\">2.新建工程引入依赖</h3>\n<blockquote>\n<p><strong>自行新建一个Maven工程并导入下面所有的依赖</strong></p>\n</blockquote>\n<h6 id=\"引入MyBaits-Plus的依赖及多数据源的依赖\"><strong>引入MyBaits-Plus的依赖及多数据源的依赖</strong></h6>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-generator<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.freemarker<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>freemarker<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.31<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       </span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-编写配置文件\">3.编写配置文件</h3>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"comment\"># 配置数据源信息</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">dynamic:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置默认的数据源或者数据源组,默认值即为master</span></span><br><span class=\"line\">      <span class=\"attr\">primary:</span> <span class=\"string\">master</span></span><br><span class=\"line\">      <span class=\"comment\"># 严格匹配数据源,默认false.true未匹配到指定数据源时抛异常,false使用默认数据源</span></span><br><span class=\"line\">      <span class=\"attr\">strict:</span> <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"attr\">datasource:</span></span><br><span class=\"line\">        <span class=\"attr\">master:</span></span><br><span class=\"line\">          <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">          <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">          <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">          <span class=\"attr\">password:</span> <span class=\"string\">&quot;00000000&quot;</span></span><br><span class=\"line\">        <span class=\"attr\">slave_1:</span></span><br><span class=\"line\">          <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus_1?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">          <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">          <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">          <span class=\"attr\">password:</span> <span class=\"string\">&quot;00000000&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"4-创建实体类\">4.创建实体类</h3>\n<h6 id=\"新建一个User实体类（如果数据库表名有t-前缀记得配置）\">新建一个<code>User</code>实体类（如果数据库表名有t_前缀记得配置）</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableLogic;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.Enum.sexEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.AllArgsConstructor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.NoArgsConstructor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@NoArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@AllArgsConstructor</span></span><br><span class=\"line\"><span class=\"meta\">@TableName(&quot;t_user&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">User</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//value指定主键字段</span></span><br><span class=\"line\">    <span class=\"comment\">//type设置主键生成策略</span></span><br><span class=\"line\">    <span class=\"meta\">@TableId(value = &quot;uid&quot;)</span><span class=\"comment\">//,type = IdType.AUTO)</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long uid;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"新建一个实体类Product\">新建一个实体类<code>Product</code></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB.bean;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.Version;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Product</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer price;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span>   <span class=\"comment\">//标识乐观锁版本号字段</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-创建Mapper及Service\">5.创建Mapper及Service</h3>\n<h6 id=\"新建接口UserMapper\">新建接口<code>UserMapper</code></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB.Mapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.bean.Product;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ProductMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;Product&gt; &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"新建接口ProductMapper\">新建接口<code>ProductMapper</code></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB.Mapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.bean.User;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"新建Service接口UserServiceImpl指定操作的数据源\">新建Service接口<code>UserServiceImpl</code>指定操作的数据源</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@DS(&quot;master&quot;)</span> <span class=\"comment\">//指定操作的数据源，master为user表</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UserServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;UserMapper, User&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">UserService</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"新建Service接口ProductServiceImpl指定操作的数据源\">新建Service接口<code>ProductServiceImpl</code>指定操作的数据源</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"meta\">@DS(&quot;slave_1&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ProductServiceImpl</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">ServiceImpl</span>&lt;ProductMapper, Product&gt; <span class=\"keyword\">implements</span> <span class=\"title class_\">ProductService</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h6 id=\"自行建立Service\">自行建立Service</h6>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ProductService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;Product&gt; &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">UserService</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">IService</span>&lt;User&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-编写测试方法\">6.编写测试方法</h3>\n<blockquote>\n<p><strong>记得在启动类中添加注解<code>@MapperScan()</code></strong></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@MapperScan(&quot;com.ry.MultiDB.Mapper&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">RyApplication</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        SpringApplication.run(RyApplication.class,args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.MultiDB;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.Mapper.ProductMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.bean.Product;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.bean.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.service.ProductService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.ry.MultiDB.service.UserService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">DBMPTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService;</span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProductService productService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> userService.getById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">        <span class=\"type\">Product</span> <span class=\"variable\">product</span> <span class=\"operator\">=</span> productService.getById(<span class=\"number\">1L</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;User = &quot;</span> + user);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Product = &quot;</span> + product);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110028199.png\" alt></p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222184.png\" alt></p>\n<h2 id=\"八、MyBatisX插件\">八、MyBatisX插件</h2>\n<blockquote>\n<p>MyBatis-Plus为我们提供了强大的mapper和service模板，能够大大的提高开发效率。</p>\n<p>但是在真正开发过程中，MyBatis-Plus并不能为我们解决所有问题，例如一些复杂的SQL，多表联查，我们就需要自己去编写代码和SQL语句，我们该如何快速的解决这个问题呢，这个时候可以使用MyBatisX插件。</p>\n<p>MyBatisX一款基于 IDEA 的快速开发插件，为效率而生。</p>\n</blockquote>\n<h4 id=\"1-安装MyBatisX插件\">1.安装MyBatisX插件</h4>\n<blockquote>\n<p><strong>打开IDEA，File-&gt; Setteings-&gt;Plugins-&gt;MyBatisX，搜索栏搜索MyBatisX然后安装。</strong></p>\n</blockquote>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222919.png\" alt></p>\n<h4 id=\"2-快速生成代码\">2.快速生成代码</h4>\n<h6 id=\"新建一个Maven项目引入依赖\">新建一个Maven项目引入依赖</h6>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.4.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-generator<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.freemarker<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>freemarker<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.31<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"配置数据源信息\">配置数据源信息</h6>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"comment\"># 配置数据源信息</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&quot;00000000&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>\n<h6 id=\"在IDEA中与数据库建立链接\">在IDEA中与数据库建立链接</h6>\n<img src=\"https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522120758740.png\" alt=\"image-20220522120758740\" style=\"zoom: 50%;\">\n<h6 id=\"填写数据库信息并保存\">填写数据库信息并保存</h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222336.png\" alt=\"image-20230311010513273\" style=\"zoom:33%;\">\n<h6 id=\"找到我们需要生成的表点击右键\">找到我们需要生成的表点击右键</h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222846.png\" alt=\"image-20230311005308096\" style=\"zoom: 33%;\">\n<h6 id=\"填写完信息以后下一步\">填写完信息以后下一步</h6>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110050796.png\" alt></p>\n<h6 id=\"继续填写信息\">#### 继续填写信息</h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222390.png\" alt=\"image-20230311005121046\" style=\"zoom:33%;\">\n<h6 id=\"大功告成\"><strong>大功告成</strong></h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110052665.png\" alt=\"image-20230311005232590\" style=\"zoom:33%;\">\n<h4 id=\"3-快速生成CRUD\">3.快速生成CRUD</h4>\n<blockquote>\n<p>MyBaitsX可以根据我们在Mapper接口中输入的方法名快速帮我们生成对应的sql语句</p>\n</blockquote>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110058040.png\" alt=\"image-20230311005839971\" style=\"zoom:25%;\">\n<h6 id=\"效果：\">效果：</h6>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111222637.png\" alt=\"image-20230311005939912\" style=\"zoom: 50%;\">\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303110100859.png\" alt=\"image-20230311010006695\" style=\"zoom:25%;\">\n<h2 id=\"九、雪花算法\">九、雪花算法</h2>\n<h5 id=\"背景\"><strong>背景</strong></h5>\n<p>需要选择合适的方案去应对数据规模的增长，以应对逐渐增长的访问压力和数据量。</p>\n<p>数据库的扩展方式主要包括：业务分库、主从复制，数据库分表。</p>\n<h5 id=\"数据库分表\"><strong>数据库分表</strong></h5>\n<p>将不同业务数据分散存储到不同的数据库服务器，能够支撑百万甚至千万用户规模的业务，但如果业务继续发展，同一业务的单表数据也会达到单台数据库服务器的处理瓶颈。例如，淘宝的几亿用户数据，如果全部存放在一台数据库服务器的一张表中，肯定是无法满足性能要求的，此时就需要对单表数据进行拆分。</p>\n<p>单表数据拆分有两种方式：垂直分表和水平分表。示意图如下：</p>\n<img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111530831.png\" alt=\"image-20230311153024674\" style=\"zoom:33%;\">\n<h5 id=\"垂直分表\"><strong>垂直分表</strong></h5>\n<p>垂直分表适合将表中某些不常用且占了大量空间的列拆分出去。</p>\n<p>例如，前面示意图中的 nickname 和 description 字段，假设我们是一个婚恋网站，用户在筛选其他用户的时候，主要是用 age 和 sex 两个字段进行查询，而 nickname 和 description 两个字段主要用于展示，一般不会在业务查询中用到。description 本身又比较长，因此我们可以将这两个字段独立到另外一张表中，这样在查询 age 和 sex 时，就能带来一定的性能提升。</p>\n<h5 id=\"水平分表\"><strong>水平分表</strong></h5>\n<p>水平分表适合表行数特别大的表，有的公司要求单表行数超过 5000 万就必须进行分表，这个数字可以作为参考，但并不是绝对标准，关键还是要看表的访问性能。对于一些比较复杂的表，可能超过 1000万就要分表了；而对于一些简单的表，即使存储数据超过 1 亿行，也可以不分表。但不管怎样，当看到表的数据量达到千万级别时，作为架构师就要警觉起来，因为这很可能是架构的性能瓶颈或者隐患。</p>\n<p>水平分表相比垂直分表，会引入更多的复杂性，例如要求全局唯一的数据id该如何处理</p>\n<h5 id=\"主键自增\"><strong>主键自增</strong></h5>\n<p>①以最常见的用户 ID 为例，可以按照 1000000 的范围大小进行分段，1 ~ 999999 放到表 1中，1000000 ~ 1999999 放到表2中，以此类推。</p>\n<p>②复杂点：分段大小的选取。分段太小会导致切分后子表数量过多，增加维护复杂度；分段太大可能会导致单表依然存在性能问题，一般建议分段大小在 100 万至 2000 万之间，具体需要根据业务选取合适的分段大小。</p>\n<p>③优点：可以随着数据的增加平滑地扩充新的表。例如，现在的用户是 100 万，如果增加到 1000 万，只需要增加新的表就可以了，原有的数据不需要动。</p>\n<p>④缺点：分布不均匀。假如按照 1000 万来进行分表，有可能某个分段实际存储的数据量只有 1 条，而另外一个分段实际存储的数据量有 1000 万条。</p>\n<p><strong>取模</strong></p>\n<p>①同样以用户 ID 为例，假如我们一开始就规划了 10 个数据库表，可以简单地用 user_id % 10 的值来表示数据所属的数据库表编号，ID 为 985 的用户放到编号为 5 的子表中，ID 为 10086 的用户放到编号为 6 的子表中。</p>\n<p>②复杂点：初始表数量的确定。表数量太多维护比较麻烦，表数量太少又可能导致单表性能存在问题。</p>\n<p>③优点：表分布比较均匀。</p>\n<p>④缺点：扩充新的表很麻烦，所有数据都要重分布。</p>\n<p><strong>雪花算法</strong></p>\n<p>雪花算法是由Twitter公布的分布式主键生成算法，它能够保证不同表的主键的不重复性，以及相同表的</p>\n<p>主键的有序性。</p>\n<p>①核心思想：</p>\n<p>长度共64bit（一个long型）。首先是一个符号位，1bit标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，所以id一般是正数，最高位是0。41bit时间截(毫秒级)，存储的是时间截的差值（当前时间截 - 开始时间截)，结果约等于69.73年。10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID，可以部署在1024个节点）。</p>\n<p>12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID）。</p>\n<p>②优点：整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞，并且效率较高。</p>\n<p><img src=\"https://gitee.com/Ryang1118/typora/raw/master/images/202303111530174.png\" alt></p>\n<h2 id=\"整合pom-xml-和-yml\">整合pom.xml 和 yml</h2>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/MyBatisPlus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">&#x27;00000000&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"comment\">#配置数据源类型</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.zaxxer.hikari.HikariDataSource</span></span><br><span class=\"line\"><span class=\"comment\">#MyBatis-Plus相关配置</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"comment\">#配置日志</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class=\"line\">  <span class=\"comment\">#此处配置要格外注意</span></span><br><span class=\"line\">  <span class=\"attr\">global-config:</span></span><br><span class=\"line\">    <span class=\"attr\">db-config:</span></span><br><span class=\"line\">      <span class=\"comment\"># 设置实体类所对应的表的统一前缀</span></span><br><span class=\"line\">      <span class=\"attr\">table-prefix:</span> <span class=\"string\">t_</span></span><br><span class=\"line\">        <span class=\"comment\">#配置mp的主键策略为自增</span></span><br><span class=\"line\">      <span class=\"attr\">id-type:</span> <span class=\"string\">auto</span></span><br><span class=\"line\">  <span class=\"comment\">#配置User类型别名所对应的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-aliases-package:</span> <span class=\"string\">com.ry.mp.bean</span></span><br><span class=\"line\">    <span class=\"comment\"># 扫描通用枚举的包</span></span><br><span class=\"line\">  <span class=\"attr\">type-enums-package:</span> <span class=\"string\">com.ry.mp.Enum</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mysql.version</span>&gt;</span>8.0.28<span class=\"tag\">&lt;/<span class=\"name\">mysql.version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-parent<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.4.RELEASE<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">parent</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.projectlombok<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>lombok<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">optional</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">optional</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-test<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-generator<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.freemarker<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>freemarker<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.31<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>","_path":"post/8af9e237.html","_link":"http://rycan.top/post/8af9e237.html","_id":"clm7xl5ms00158l0p0z6jed98"}}