{"type":"getPostByPath","data":{"title":"模版方法模式","date":"2023-11-03T13:41:41.000Z","description":"设计模式","categories":[{"name":"设计模式","_id":"cloioo9ek006pni0p4yn52heq"}],"tags":[{"name":"设计模式","_id":"cloioo9es009hni0p7ldzhmzb"}],"content":"<meta name=\"referrer\" content=\"no-referrer\">\n<h2 id=\"模版方法模式\">模版方法模式</h2>\n<h3 id=\"介绍\">介绍</h3>\n<ul>\n<li>\n<p>在超（父）类中定义了一个算法框架，允许子类在不修改的结构的情况下重写算法的特定步骤；</p>\n</li>\n<li>\n<p>可以针对不同的场景抽象出一种通用的算法结构，去除重复的代码；在客户端中包含了所有的条件语句，会根据不同的处理对象类型  选择对应的处理过程 。</p>\n</li>\n<li>\n<p>要是所有处理数据的类都拥有相同的接口或者基类，那么就可以删除客户端代码中的条件语句，从而使用多态机制处理对象上调用的函数。</p>\n</li>\n</ul>\n<h3 id=\"使用\">使用</h3>\n<ul>\n<li>\n<p>将所有的算法分解为一系列的步骤，然后在这些步骤中改写为方法，最后在模版方法中依次调用这些方法；</p>\n</li>\n<li>\n<p>步骤是可以抽象的，也是有一些默认的实现，为了能够使用算法，客户端需要自行提供子类并实现所有的抽象步骤。</p>\n<ul>\n<li>\n<p>抽象的步骤：将所有的步骤声明为抽象类型，强制要求所有的子类自行实现这些方法</p>\n</li>\n<li>\n<p>可选的步骤：已有的默认实现，在需要的时候是可重写的</p>\n</li>\n<li>\n<p>钩子：是内容为空的可选步骤。 即使不重写钩子， 模板方法也能工作；通常放置在算法重要步骤的前后， 为子类提供额外的算法扩展点</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"组成\">组成</h3>\n<ul>\n<li>抽象类：声明作为算法步骤的方法 以及 依次调用 他们的实际模版方法，算法步骤 可以被声明为抽象的类型，或者是一些默认的实现</li>\n<li>具体类： 可以重写所有的步骤，但是不能重写模版方法自身</li>\n</ul>\n<h3 id=\"使用场景\">使用场景</h3>\n<ul>\n<li>扩展某个指定的算法的指定步骤时候，而不是整个算法或者结构</li>\n<li>多个类的算法除了一些细微的不同之外几乎完全一样的时候（后果：只要算法发生变化就可能需要修改所有的类）</li>\n</ul>\n<h3 id=\"思考角度\">思考角度</h3>\n<ul>\n<li>\n<p>分析目标算法，何处能够分解多个步骤，从所有子类的角度出发，考虑通用和特有的步骤分别有哪些</p>\n</li>\n<li>\n<p>创建抽象父类 并声明一个模版方法  和   代表算法步骤的一系列抽象方法，后根据算法结构依次调用所有的步骤。对于模版方法可以使用final 修饰，防止子类对其进行修改</p>\n</li>\n<li>\n<p>可以默认实现一些步骤，减少子类的实现</p>\n</li>\n<li>\n<p>可以尝试在算法步骤之间加上钩子，从而能够增加算法的扩展点</p>\n</li>\n<li>\n<p>为每个算法变体新建一个具体子类， 必须实现所有的抽象步骤， 也可以重写部分可选步骤</p>\n</li>\n</ul>\n<h3 id=\"优点\">优点</h3>\n<ul>\n<li>可仅在客户端重写一个大型算法的部分特定步骤，从而减少对算法的其他步骤造成的影响</li>\n<li>可以把重复代码提取到一个超类中</li>\n</ul>\n<h3 id=\"缺点\">缺点</h3>\n<ul>\n<li>部分客户端可能会受到算法框架的限制</li>\n<li>子类不重写默认的步骤可能会违反 里氏替换原则</li>\n<li>模版方法的步骤越多，维护工作的就可能越困难</li>\n</ul>\n<h3 id=\"相互之间的关系\">相互之间的关系</h3>\n<ul>\n<li><code>工厂方法模式</code>— 一种特殊的模版方法模式，所谓的工厂方法可以作为一个大型模版方法中的一个步骤</li>\n<li>模版方法基于继承的机制，但是策略是基于组合的机制；模版方法所作用的对象是类，静态的；策略则是对象，是动态的；</li>\n</ul>\n<h3 id=\"举例\">举例</h3>\n<p>这里是一些核心 Java 程序库中模版方法的示例：</p>\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html\"><code>java.io.InputStream</code></a>、 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html\"><code>java.io.OutputStream</code></a>、 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/Reader.html\"><code>java.io.Reader</code></a> 和 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/Writer.html\"><code>java.io.Writer</code></a> 的所有非抽象方法。</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/AbstractList.html\"><code>java.util.AbstractList</code></a>、 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/AbstractSet.html\"><code>java.util.AbstractSet</code></a> 和 <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.html\"><code>java.util.AbstractMap</code></a> 的所有非抽象方法。</li>\n<li><a href=\"http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html\"><code>javax.servlet.http.HttpServlet</code></a>， 所有默认发送 HTTP 405 “方法不允许” 错误响应的 <code>do­XXX()</code>方法。 你可随时对其进行重写。</li>\n</ul>\n<p><strong>识别方法：</strong> 模版方法可以通过行为方法来识别， 该方法已有一个在基类中定义的 “默认” 行为</p>\n<h3 id=\"演示\">演示</h3>\n<h4 id=\"抽象类\">抽象类</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.pattern.TemplateMethod.AbstractAndExtends;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FriendApp</span> &#123;</span><br><span class=\"line\">    String username;</span><br><span class=\"line\">    String password;</span><br><span class=\"line\">    FriendApp()&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span>  <span class=\"title function_\">post</span><span class=\"params\">(String msg)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(logIn(<span class=\"built_in\">this</span>.username,<span class=\"built_in\">this</span>.password))&#123;</span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> sendData(msg.getBytes());</span><br><span class=\"line\">            logOut();</span><br><span class=\"line\">            <span class=\"keyword\">return</span>  res;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title function_\">logOut</span><span class=\"params\">()</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"type\">boolean</span> <span class=\"title function_\">sendData</span><span class=\"params\">(<span class=\"type\">byte</span>[] bytes)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"type\">boolean</span> <span class=\"title function_\">logIn</span><span class=\"params\">(String username, String password)</span> ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"具体类\">具体类</h4>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.pattern.TemplateMethod.AbstractAndExtends;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FaceBook</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">FriendApp</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">FaceBook</span><span class=\"params\">(String username,String password)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.username = username;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.password = password;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">logIn</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking Facebook user&#x27;s username&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Name: &quot;</span> + <span class=\"built_in\">this</span>.username);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking Facebook user&#x27;s password&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; password.length(); i++) &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;*&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">        simulateNetwork();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;LoginIn FaceBook&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">logOut</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;User: &#x27;&quot;</span> + username + <span class=\"string\">&quot;&#x27; was logged out from Facebook&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">sendData</span><span class=\"params\">(<span class=\"type\">byte</span>[] bytes)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">msgbyte</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(msgbyte)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;MSG:&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(bytes) +<span class=\"string\">&quot; was post on facebook&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">simulateNetwork</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> i=<span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;simulateNetwork Facebook&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">200</span>);</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.pattern.TemplateMethod.AbstractAndExtends;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">QQApp</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">FriendApp</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">QQApp</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.username = username;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.password = password;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">logIn</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking QQApp user&#x27;s username&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Name: &quot;</span> + <span class=\"built_in\">this</span>.username);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking QQApp user&#x27;s password&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; password.length(); i++) &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;*&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;LoginIn QQApp&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">logOut</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;User: &#x27;&quot;</span> + username + <span class=\"string\">&quot;&#x27; was logged out from QQApp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">sendData</span><span class=\"params\">(<span class=\"type\">byte</span>[] bytes)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">msgbyte</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(msgbyte)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;MSG:&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(bytes) +<span class=\"string\">&quot; was post on QQApp&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">simulateNetwork</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> i=<span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;simulateNetwork QQApp&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">200</span>);</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.pattern.TemplateMethod.AbstractAndExtends;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Twitter</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">FriendApp</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">Twitter</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.username = username;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.password = password;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">logIn</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking Twitter user&#x27;s username&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Name: &quot;</span> + <span class=\"built_in\">this</span>.username);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking Twitter user&#x27;s password&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; password.length(); i++) &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;*&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">        simulateNetwork();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;LoginIn Twitter&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">logOut</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;User: &#x27;&quot;</span> + username + <span class=\"string\">&quot;&#x27; was logged out from Twitter&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">sendData</span><span class=\"params\">(<span class=\"type\">byte</span>[] bytes)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">msgbyte</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(msgbyte)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;MSG:&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(bytes) +<span class=\"string\">&quot; was post on Twitter&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">simulateNetwork</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> i=<span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;simulateNetwork Twitter&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">200</span>);</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.ry.learning.study.pattern.TemplateMethod.AbstractAndExtends;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WxApp</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">FriendApp</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">WxApp</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.username = username;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.password = password;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">logIn</span><span class=\"params\">(String username, String password)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking WxApp user&#x27;s username&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Name: &quot;</span> + <span class=\"built_in\">this</span>.username);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Checking WxApp user&#x27;s password&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; password.length(); i++) &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;*&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">        simulateNetwork();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;LoginIn WxApp&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">logOut</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;User: &#x27;&quot;</span> + username + <span class=\"string\">&quot;&#x27; was logged out from WxApp&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"title function_\">sendData</span><span class=\"params\">(<span class=\"type\">byte</span>[] bytes)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">msgbyte</span> <span class=\"operator\">=</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(msgbyte)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;MSG:&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>(bytes) +<span class=\"string\">&quot; was post on WxApp&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">simulateNetwork</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> i=<span class=\"number\">1</span>;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;simulateNetwork WxApp&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(i &lt; <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">200</span>);</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"结果：\">结果：</h4>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Input String username</span><br><span class=\"line\">ry</span><br><span class=\"line\">Input String password</span><br><span class=\"line\">123456</span><br><span class=\"line\">Input msg</span><br><span class=\"line\">hello word</span><br><span class=\"line\"></span><br><span class=\"line\">Choose social network <span class=\"keyword\">for</span> posting message.</span><br><span class=\"line\">1 - Facebook</span><br><span class=\"line\">2 - Twitter</span><br><span class=\"line\">3 - WxApp</span><br><span class=\"line\">4 - QQAPP</span><br><span class=\"line\">input go on  <span class=\"keyword\">then</span>  input number <span class=\"keyword\">else</span> byebye </span><br><span class=\"line\">go on</span><br><span class=\"line\">1</span><br><span class=\"line\">Checking Facebook user<span class=\"string\">&#x27;s username</span></span><br><span class=\"line\"><span class=\"string\">Name: ry</span></span><br><span class=\"line\"><span class=\"string\">Checking Facebook user&#x27;</span>s password</span><br><span class=\"line\">******</span><br><span class=\"line\">simulateNetwork Facebook</span><br><span class=\"line\">LoginIn FaceBook</span><br><span class=\"line\">MSG:hello word was post on facebook</span><br><span class=\"line\">User: <span class=\"string\">&#x27;ry&#x27;</span> was logged out from Facebook</span><br><span class=\"line\">go on</span><br><span class=\"line\">2</span><br><span class=\"line\">Checking Twitter user<span class=\"string\">&#x27;s username</span></span><br><span class=\"line\"><span class=\"string\">Name: ry</span></span><br><span class=\"line\"><span class=\"string\">Checking Twitter user&#x27;</span>s password</span><br><span class=\"line\">******</span><br><span class=\"line\">simulateNetwork Twitter</span><br><span class=\"line\">LoginIn Twitter</span><br><span class=\"line\">MSG:hello word was post on Twitter</span><br><span class=\"line\">User: <span class=\"string\">&#x27;ry&#x27;</span> was logged out from Twitter</span><br><span class=\"line\">go on</span><br><span class=\"line\">3</span><br><span class=\"line\">Checking WxApp user<span class=\"string\">&#x27;s username</span></span><br><span class=\"line\"><span class=\"string\">Name: ry</span></span><br><span class=\"line\"><span class=\"string\">Checking WxApp user&#x27;</span>s password</span><br><span class=\"line\">******</span><br><span class=\"line\">simulateNetwork WxApp</span><br><span class=\"line\">LoginIn WxApp</span><br><span class=\"line\">MSG:hello word was post on WxApp</span><br><span class=\"line\">User: <span class=\"string\">&#x27;ry&#x27;</span> was logged out from WxApp</span><br><span class=\"line\">go on</span><br><span class=\"line\">4</span><br><span class=\"line\">Checking QQApp user<span class=\"string\">&#x27;s username</span></span><br><span class=\"line\"><span class=\"string\">Name: ry</span></span><br><span class=\"line\"><span class=\"string\">Checking QQApp user&#x27;</span>s password</span><br><span class=\"line\">******</span><br><span class=\"line\">LoginIn QQApp</span><br><span class=\"line\">MSG:hello word was post on QQApp</span><br><span class=\"line\">User: <span class=\"string\">&#x27;ry&#x27;</span> was logged out from QQApp</span><br><span class=\"line\">-1</span><br><span class=\"line\"></span><br><span class=\"line\">进程已结束，退出代码为 0</span><br></pre></td></tr></table></figure>\n<h4 id=\"文件结构\">文件结构</h4>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── AbstractAndExtends\t\t\t\t-- 所有的类</span><br><span class=\"line\">│   ├── FaceBook.java\t\t\t\t\t-- 继承类</span><br><span class=\"line\">│   ├── FriendApp.java\t\t\t\t-- 抽象类</span><br><span class=\"line\">│   ├── QQApp.java\t\t\t\t\t\t-- 继承类</span><br><span class=\"line\">│   ├── Twitter.java\t\t\t\t\t-- 继承类</span><br><span class=\"line\">│   └── WxApp.java\t\t\t\t\t\t-- 继承类</span><br><span class=\"line\">└── Client.java\t\t\t\t\t\t\t\t-- 客户端</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","_path":"post/5029c2a3.html","_link":"http://rycan.top/post/5029c2a3.html","_id":"cloioo9ej006jni0p7u1regep"}}